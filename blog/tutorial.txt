 
AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs

1. migration tabel authors

  public function up()
    {
        Schema::create('authors', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            
        });
    }
// tabel penulis 


1. buka terminal dan migration unutk membuat table buku / books 
php artisan make:migration create_books_table
Created Migration: 2020_03_23_130418_create_books_table

Schema::create('books', function (Blueprint $table) {
            $table->id();
            $table->unsignedBigInteger('author_id'); // ke table authors
            $table->string('title');
            $table->text('description');
            $table->string('cover');
            $table->timestamps();


            //table foreach key
            $table->foreign('author_id')->references('id')->on('authors') // di arahkan ke tabel authors
                ->onUpdate('CASCADE')
                ->unDelete('CASCADE');


2. buka termibal dan buar migration tabel 


 php artisan make:migration create_borrow_history_table --create=borrow_history
Created Migration: 2020_03_23_131417_create_borrow_history_table

        Schema::create('borrow_history', function (Blueprint $table) {
            $table->id();
            $table->unsignedBigInteger('user_id'); // ke table authors
            $table->unsignedBigInteger('book_id'); // ke table authors
            $table->timestamps();

             //table foreach key
             $table->foreign('user_id')->references('id')->on('users') // di arahkan ke tabel authors
             ->onUpdate('CASCADE')
             ->unDelete('CASCADE');

            //table foreach key
            $table->foreign('book_id')->references('id')->on('books') // di arahkan ke tabel authors
            ->onUpdate('CASCADE')
            ->unDelete('CASCADE');
        });


3. install laravel permission 
installl laravel permission 

// 
https://docs.spatie.be/laravel-permission/v3/installation-laravel/

buka terminal 
composer require spatie/laravel-permission

Using version ^3.11 for spatie/laravel-permission
./composer.json has been updated
Loading composer repositories with package information
Updating dependencies (including require-dev)
Package operations: 1 install, 0 updates, 0 removals
  - Installing spatie/laravel-permission (3.11.0): Loading from cache
Writing lock file
Generating optimized autoload files
> Illuminate\Foundation\ComposerScripts::postAutoloadDump
> @php artisan package:discover --ansi
Discovered Package: facade/ignition
Discovered Package: fideloper/proxy
Discovered Package: fruitcake/laravel-cors
Discovered Package: laravel/tinker
Discovered Package: laravel/ui
Discovered Package: nesbot/carbon
Discovered Package: nunomaduro/collision
Discovered Package: spatie/laravel-permission
Package manifest generated successfully.



4. install selanjutnya 

//
https://docs.spatie.be/laravel-permission/v3/installation-laravel/


$ php artisan vendor:publish --provider="Spatie\Permission\PermissionServiceProvider" --tag="migrations"
Publishing complete.

$ php artisan vendor:publish --provider="Spatie\Permission\PermissionServiceProvider"
Copied File [\vendor\spatie\laravel-permission\config\permission.php] To [\confi
g\permission.php]
Copied File [\vendor\spatie\laravel-permission\database\migrations\create_permis
sion_tables.php.stub] To [\database\migrations\2020_03_23_141936_create_permissi
on_tables.php]
Publishing complete.



5. termilanl 

php artisan migrate


6. terminal 
$ php artisan vendor:publish --provider="Spatie\Permission\PermissionServiceProvider" --tag="config"
Publishing complete.



7. konfigurasikan middleware

// https://docs.spatie.be/laravel-permission/v3/basic-usage/middleware/

file
 karnel.php

'role' => \Spatie\Permission\Middlewares\RoleMiddleware::class,
 'permission' => \Spatie\Permission\Middlewares\PermissionMiddleware::class,
  'role_or_permission' => \Spatie\Permission\Middlewares\RoleOrPermissionMiddleware::class,


8.

9.

10.

PERTEMUAN KE 2 


2. INSTALL LARAVEL DEBUGBAR 

// 
https://github.com/barryvdh/laravel-debugbar

terminal 
composer require barryvdh/laravel-debugbar --dev

Using version ^3.2 for barryvdh/laravel-debugbar
./composer.json has been updated
Loading composer repositories with package information
Updating dependencies (including require-dev)
Package operations: 3 installs, 0 updates, 0 removals
  - Installing symfony/debug (v4.4.5): Loading from cache
  - Installing maximebf/debugbar (v1.16.1): Loading from cache
  - Installing barryvdh/laravel-debugbar (v3.2.9): Loading from cache
maximebf/debugbar suggests installing kriswallsmith/assetic (The best way to manage assets)
maximebf/debugbar suggests installing predis/predis (Redis storage)
Writing lock file
Generating optimized autoload files
> Illuminate\Foundation\ComposerScripts::postAutoloadDump
> @php artisan package:discover --ansi
Discovered Package: barryvdh/laravel-debugbar
Discovered Package: facade/ignition
Discovered Package: fideloper/proxy
Discovered Package: fruitcake/laravel-cors
Discovered Package: laravel/tinker
Discovered Package: laravel/ui
Discovered Package: nesbot/carbon
Discovered Package: nunomaduro/collision
Discovered Package: spatie/laravel-permission
Package manifest generated successfully.



3. PERTEMUAN KE 3 

IMPLEMENTASIKAN PENERAPAN TEMPLATE ADMIN LTE 

- buat folder di dalam public 
-buat folder assets
copy 3 komponen admin lte 

-bower_components
-dist
-plugins


4. PERTEMUAN KE 4 

membuat master child

5.


6. PERTEMUAN KE 5 
folder views
membuat folder admin
-templates, partials
isi templates dengan di pisah menjadi beberapa sesuai kebutuhan 


7.

8.

9. PERTEMUAN KE 6 
-install 
	composer require laravel/ui

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/6
$ composer require laravel/ui
Using version ^2.0 for laravel/ui
./composer.json has been updated
Loading composer repositories with package information
Updating dependencies (including require-dev)
Package operations: 1 install, 0 updates, 0 removals
  - Installing laravel/ui (v2.0.1): Downloading (100%)
Writing lock file
Generating optimized autoload files
> Illuminate\Foundation\ComposerScripts::postAutoloadDump
> @php artisan package:discover --ansi
Discovered Package: facade/ignition
Discovered Package: fideloper/proxy
Discovered Package: fruitcake/laravel-cors
Discovered Package: laravel/tinker
Discovered Package: laravel/ui
Discovered Package: nesbot/carbon
Discovered Package: nunomaduro/collision
Package manifest generated successfully.



10. install

php artisan ui bootstrap --auth

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/6
$ php artisan ui bootstrap --auth
Bootstrap scaffolding installed successfully.
Please run "npm install && npm run dev" to compile your fresh scaffolding.
Authentication scaffolding generated successfully.




1. SELANJUTNYA 

INSTALL NODE JS 


2. 

install dan buka terminal 

npm install && npm run dev

<s> [webpack.Progress] 92% additional asset processing
<s> [webpack.Progress] 92% additional asset processing ExtractTextPlugin
<s> [webpack.Progress] 92% chunk asset optimization
<s> [webpack.Progress] 93% after chunk asset optimization
<s> [webpack.Progress] 93% asset optimization
<s> [webpack.Progress] 94% after asset optimization
<s> [webpack.Progress] 94% after seal
<s> [webpack.Progress] 95% emitting
<s> [webpack.Progress] 95% emitting unnamed compat plugin
<s> [webpack.Progress] 98% after emitting
<s> [webpack.Progress] 98% after emitting SizeLimitsPlugin
 DONE  Compiled successfully in 18747ms06:17:05

<s> [webpack.Progress] 100%

       Asset      Size   Chunks             Chunk Names
/css/app.css   177 KiB  /js/app  [emitted]  /js/app
  /js/app.js  1.06 MiB  /js/app  [emitted]  /js/app



3. lihat halaman menu laravel ,,,
sudah bisa untuk register dan login secara sukses ....



4. selanjutnya mengnangani kalo lupa password 

// https://mailtrap.io/

- gunakan mailtrap untuk email masuk ke mailtrap buka ke table user 

- gunakan GitHub dengan akun email amirinsyaifudin6@gmail.com untuk login ke Mailtrap 

- masuk ke Demo inbox 




5. buka app dan masuk ke file 

	.env

MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS=null
MAIL_FROM_NAME="${APP_NAME}"




6. masuk web mailtrap , dan copy kode username dan passsword 

- copy kode username password dari SMTP  


- Credentials   Reset SMTP/POP3
SMTP
Host:	smtp.mailtrap.io
Port:	25 or 465 or 587 or 2525
Username:	352e654670b645
Password:	9168cde2c25228
Auth:	PLAIN, LOGIN and CRAM-MD5
TLS:	Optional (STARTTLS on all ports)


POP3
Host:	pop3.mailtrap.io
Port:	1100 or 9950
Username:	352e654670b645
Password:	9168cde2c25228
Auth:	USER/PASS, PLAIN, LOGIN, APOP and CRAM-MD5
TLS:	Optional (STARTTLS on all ports)
Integrations



7. file 

.env

perubahan fiel, ada tambahan kode user dan password
 

MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=352e654670b645
MAIL_PASSWORD=9168cde2c25228
MAIL_ENCRYPTION=
MAIL_FROM_ADDRESS=null
MAIL_FROM_NAME="${APP_NAME}"


MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=352e654670b645
MAIL_PASSWORD=9168cde2c25228
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS=null
MAIL_FROM_NAME="${APP_NAME}"


 - erroe belum mendapatkan konfirmasi dari mailtrap 




8. masuk untuk folder config 

mail.php



9.APP_URL=http://localhost:8000



10.

Selanjutnya implementasi untuk email benar benar email nyata 
masuk ke Model
 User.php 

tambahkan code 

class User extends Authenticatable implements MustVerifyEmail



1. masuk ke web.php 

tambahkan code 

Auth::routes(['verify' => true]);


2. membatasi user Home
 
- membatasi halaman home untuk user email yang sudah terverifikasi, hanya bisa di akses dengan User yang sudah terverifikasi 

web.php 

Route::get('/home', 'HomeController@index')->name('home')->middleware('verified');









3. PERTEMUAN KE 7 

input data REGISTER DENGAN NAMA USER DI databases-> model_has_roles

MEMBERIKAN ROLE UNTUK USER TERDAFTAR 

membuat data role 
user 
admin 

buka terminal 

php artisan make:seeder RolesTableSeeder

php artisan make:seeder RolesTableSeeder
Seeder created successfully.

masuk ke folder databases

fiel 

roles.tableseeder.php

use Spatie\Permission\Models\Role; //add



 // membuat role
        Role::create([
            'name' => 'admin'
        ]);

        
        Role::create([
            'name' => 'user'
        ]);


4. masuk ke file DatabaseSeeder.php

  // memanggil 
         $this->call(RolesTableSeeder::class);



5. buka terminal dan jalankan 


$ php artisan db:seed
Seeding: RolesTableSeeder
Seeded:  RolesTableSeeder (0.1 seconds)
Database seeding completed successfully.




6. masuk ke RegisterController.php 

berfungsi untuk setiap registrasi email nama, password masuk input ke database model_has_role

edit function 

  protected function create(array $data)
    {
        $user = User::create([
            'name' => $data['name'],
            'email' => $data['email'],
            'password' => Hash::make($data['password']),
        ]);
    }

return menjadi $user


 // implementasikan , di dapat dari permission
        $user->assignRole('user');

        return $user;


7. Masuk ke model user.php 

User.php

tambahkan kode 

use Spatie\Permission\Traits\HasRoles; // add permission



use Notifiable, HasRoles;

8. kemudian masukkan data register dan inputlah data 

lihat di databases, ada data masuk ke tabel "model_has_roles"


SUKSES













9. PERTEMUAN KE 8 
membuar USER ADMIN dmembedakan loginnya

buka terminal 

php artisan make:seeder AdminUserSeeder
Seeder created successfully.



10. Masuk Ke folder Databases
file : 
AdminUserSeeder.php

memanggil tabel User


use App\User; //add



    public function run()
    {
        // pertemuan ke 8, memanggil tabel user
        $user = User::create([
            'name' => 'Admin Perpus',
            'email' => 'admin@perpus.test',
            'password' => bcrypt('12345678'),
        ]);

        $user->assignRole('admin');
    }




1. buka 
DatabaseSeeder.php

tambahkan code di dalam function run()

 // user admin pertemuan ke 8
         $this->call(AdminTableSeeder::class);

2. buka terminal dan jalankan perintah untuk menjalankan kode ini  
 $this->call(AdminTableSeeder::class);

php artisan db:seed -h

Options:
      --class[=CLASS]        The class name of the root seeder [default: "Databa
seSeeder"]



3. buka terminal dan jalankan kode 

php artisan db:seed --class=AdminUserSeeder
Database seeding completed successfully.

cek ke database, ada data masuk , table model_has_roles
admin@perpus.test 

dan lihat table role 

data masuk admin sesuai dengan id model_has_roles



4. tambahkan kode di AdminUserSeeder.php 

'email_verified_at' => now(),


5.





// contoh per ke 8
Route::get('/admin', function () {
    return 'admin page';
   //return view('admin.templates.default');
});



6. masuuk ke 
LoginController.php 

authenticationUser 



7. masuk ek AuthenticationUser.php 


 protected function authenticated(Request $request, $user)
    {
        //
    }

copy kode di atas di dalam LoginController.php 


8. loginController.php 

use Illuminate\Http\Request; // add pert ke 8 unction authenticated

  // perte 8 copy dari AuthenticationUser.php
    protected function authenticated(Request $request, $user)
    {
        //
    }



// contoh per ke 8
Route::get('/admin', function () {
    return 'admin page';
})->name('admin');


 // perte 8 copy dari AuthenticationUser.php
    protected function authenticated(Request $request, $user)
    {
        // pengecekan kondisi ,,,kalo user punya role admin, dan setelah login akan di redirect ke halaman admin 
        if($user->hasRole('admin')) {
            return redirect()->route('admin');
        }
    }

SUKSES 














9. PERTEMUAN KE 9 

MEMBEDAKAN ROLE ADMIN DAN USER

- buat file di dalam folder routes 

admin.php 


// contoh per ke 9
Route::get('/', function () {
    return 'admin page';
})->name('admin');




coba lakukan login dan akan terjadi error ketika admin@perpus.test malakukan login ke applikasi 
- daftarkan dulu routes , admin.php 

- buka RouteServiceProvider.php 
-tambahkan kode untuk mendaftarkan route admin.php 


- // pert ke 9, pendaftaran route admin
        $this->mapAdminRoutes();


-   // pertemuan ke 9 copy dan paste kode ini 
     /**
     * Define the "admin" routes for the application.
     *
     * These routes all receive session state, CSRF protection, etc.
     *
     * @return void
     */
    protected function mapAdminRoutes()
    {
        Route::middleware('web')
             ->namespace($this->namespace)
             ->group(base_path('routes/admin.php'));
    }



-middleware
-tambahkan kode prefix('admin')


 // pertemuan ke 9 copy dan paste kode ini 
     /**
     * Define the "admin" routes for the application.
     *
     * These routes all receive session state, CSRF protection, etc.
     *
     * @return void
     */
    protected function mapAdminRoutes()
    {
        Route::middleware('web')
             ->prefix('admin') 
             ->name('admin.') // definisi nama
             ->namespace($this->namespace)
             ->group(base_path('routes/admin.php'));
    }



10. Route 
// contoh per ke 9
Route::get('/', function () {
    return 'admin page';
})->name('dashboard');






1. LoginController.php 

  // perte 8 copy dari AuthenticationUser.php
    protected function authenticated(Request $request, $user)
    {
        // pengecekan kondisi ,,,kalo user punya role admin, dan setelah login akan di redirect ke halaman admin 
        if($user->hasRole('admin')) {
            return redirect()->route('admin.dashboard');
        }
    }






2.


// penambahan middleware auth, role:admin

 // pertemuan ke 9 copy dan paste kode ini 
     /**
     * Define the "admin" routes for the application.
     *
     * These routes all receive session state, CSRF protection, etc.
     *
     * @return void
     */
    protected function mapAdminRoutes()
    {
        Route::middleware('web','auth','role:admin')
             ->prefix('admin') 
             ->name('admin.') // definisi nama
             ->namespace($this->namespace)
             ->group(base_path('routes/admin.php'));
    }



SUKSES 


3. pertemuan ke 10 

menyiapkan halaman Admin 

-ada du controller admin, yaitu backend dan frontend 
- menjalankan perintah di bawah ini untuk membedakan 

generit Controller 

php artisan make:controller Admin\\HomeController
Controller created successfully.



4. route 
admin.php 

Route::get('/', 'admin\\HomeController@index')->name('dashboard');



5. admin/HomeCOntroller.php 

 //
    public function index()
    {
        return 'Admin';
    }




6. msuk ke 

-RouteServiceProvider.php


   protected function mapAdminRoutes()
    {
        Route::middleware('web','auth','role:admin')
             ->prefix('admin') 
             ->name('admin.') // definisi nama
             ->namespace($this->namespace. '\admin')
             ->group(base_path('routes/admin.php'));
    }





7. membersihkan template yang tidak penting ...



8. buka menu app.blade.php 

copy code untuk logout bawaan laravel 

href="{{ route('logout') }}"
                 onclick="event.preventDefault();
                  document.getElementById('logout-form').submit();



 <form id="logout-form" action="{{ route('logout') }}" method="POST" style="display: none;">
                                        @csrf
                                    </form>


9. tambahkan kode di atas di bagian header.blade.php 


  <li class="user-footer">
                
                <div class="">
                        <a href="{{ route('logout') }}"
                                onclick="event.preventDefault();
                               document.getElementById('logout-form').submit(); 
                          class="btn btn-block btn-default btn-flat">Sign out</a>
                </div>
              </li>


- untuk triger log uot 

 <form id="logout-form" action="{{ route('logout') }}" method="POST" style="display: none;">
                                        @csrf
                                    </form>












10. PERTEMUAN KE 11 
MEMBUAT DATA AUTHOR
 -jenerit data author/ penulis 

terminal 

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan make:factory AuthorFactory --model=Author
Factory created successfully.





1. msuk ke fil AuthorFactory.php 

-
$factory->define(Author::class, function (Faker $faker) {
    return [
        // pertemua ke 11
        'name' => $faker->name, 
    ];






2. membuat model Author 

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan make:model Author
Model created successfully.




3. jalankan terminal 

-php artisan tinker 

- mendefinisikan kalo di tabel di Author tidak ada create_at dan update_at 

- definisikan di model Author

- file 

Author.php

-
   public $timestamps = false;



4. jalankan perintah 

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan tinker
Psy Shell v0.10.2 (PHP 7.2.7 — cli) by Justin Hileman

>>> factory(App\Author::class, 10)->create();
=> Illuminate\Database\Eloquent\Collection {#3144

CEK DATABASES AUTHOR UDAH ADA DATA DI DATABASES, 


SUKSES 












5. PERTEMUAN KE 12 

MEMBUAT DATA BUKU 
 MENJENERIET DATA BUKU 


- menambahkan qty di tabel book 

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan make:migration add_qty_on_books_table --table=books
Created Migration: 2020_03_25_055725_add_qty_on_books_table



- file database migration

2020_03_25_055725_add_qty_on_books_table.php 

tambahkan kode 



   public function up()
    {
        Schema::table('books', function (Blueprint $table) {
            // pertemuan ke 12 add data buku qty 
            $table->string('qty')->after('cover');
        });
    }




-


public function down()
    {
        Schema::table('books', function (Blueprint $table) {
            // pert ke 12
            $table->dropColumn('qty');
        });
    }



- jalankan perntah 

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan migrate
Migrating: 2020_03_25_055725_add_qty_on_books_table
Migrated:  2020_03_25_055725_add_qty_on_books_table (0.52 seconds)





- membuat Model Book 

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan make:model Book -f
Model created successfully.
Factory created successfully.




- file 
BookFactory.php 
- buse App\Author; // add model 



$factory->define(Book::class, function (Faker $faker) {
    // membuat random imager untuk cover 
    $randomNumber = rand(1,100);
    $cover = "https://picsum.photos/seed/{$randomNumber}/200/300";

    return [
        // jenerik data buku 
        'author_id' => Author::inRandomOrder()->first()->id, // mengambil data author_id
        'title' => $faker->sentence(4),
        'description' => $faker->sentence(50),
        'cover' => $cover,
        'qty' => rand(10,20),
    ];


-
-
-



6. fiel 
Book.php 

-
-
-



7. buka google url 

-mengambil gambar 

https://picsum.photos/



8. mengambil data author_id dari tabel book 
-
-
-

 

9. php artisan tinker 

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan tinker
Psy Shell v0.10.2 (PHP 7.2.7 — cli) by Justin Hileman
>>> factory(App\Book::class, 50)->create();
=> Illuminate\Database\Eloquent\Collection {#3144

SEKSES 













10. PERTEMUAN KE 13 

menyingkat GENERATE DATA, 
CARA JITU untuk tinker factory data menjadi lebih banyak 

- terminal 
membuat seeder baru 


AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan make:seeder AuthorTableSeeder
Seeder created successfully.


- memanggil factory di AuthorSeeder.php

AuthorTableSeeder.php

 public function run()
    {
        //
        factory(App\Author::class, 10)->create();
    }

berfungsi untuk isi data di databases lebih efesien 

-
-




1. terminal 
data Book 

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan make:seeder BooksTableSeeder
Seeder created successfully.

-file 
BooksTableSeeder.php


public function run()
    {
        //
        factory(App\Book::class, 50)->create();
    }


2. daftarkan di DatabaseSeeder.php 

 // pertemuan ke 13 
         $this->call(AuthorsTableSeeder::class);
         $this->call(BooksTableSeeder::class);
- jalankan
 php artisan migrate:fresh

- cek databases kosong semua 


- jalankan kembali terminal 

php artisan db:seed

error 

- jalankan kembali terminal 

- composer dump-autoload


AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ composer dump-autoload
Generating optimized autoload files> Illuminate\Foundation\ComposerScripts::postAutoloadDump
> @php artisan package:discover --ansi
Discovered Package: barryvdh/laravel-debugbar
Discovered Package: facade/ignition
Discovered Package: fideloper/proxy
Discovered Package: fruitcake/laravel-cors
Discovered Package: laravel/tinker
Discovered Package: laravel/ui
Discovered Package: nesbot/carbon
Discovered Package: nunomaduro/collision
Discovered Package: spatie/laravel-permission
Package manifest generated successfully.
Generated optimized autoload files containing 4266 classes


// updates composer dump

- terminal dan jalankan kembali 
php artisan migrate:fresh --seed

cek databases, kembali terisi sesuai jumlah 


-

ERROR BELUM BISA MENJALANKAN 
php artisan migrate:fresh --seed

perintah untuk menambahkan data tanpa menjalankan perintah php artisan tinker














3. PERTEMUAN KE 14 MENAMPILKAN DATA PENULIS MEYIAPKAN ASSET TAMPILAN 

INSTALL YAJRA DATATABLE

- terminal 

composer require yajra/laravel-datatables-oracle:"~9.0"


AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ composer require yajra/laravel-datatables-oracle:"~9.0"
./composer.json has been updated
Loading composer repositories with package information
Updating dependencies (including require-dev)
Package operations: 1 install, 0 updates, 0 removals
  - Installing yajra/laravel-datatables-oracle (v9.9.0): Loading from cache
yajra/laravel-datatables-oracle suggests installing yajra/laravel-datatables-buttons (Plugin for server-side exporting of dataTables.)
yajra/laravel-datatables-oracle suggests installing yajra/laravel-datatables-html (Plugin for server-side HTML builder of dataTables.)
yajra/laravel-datatables-oracle suggests installing yajra/laravel-datatables-fractal (Plugin for server-side response using Fractal.)
yajra/laravel-datatables-oracle suggests installing yajra/laravel-datatables-editor (Plugin to use DataTables Editor (requires a license).)
Writing lock file
Generating optimized autoload files
> Illuminate\Foundation\ComposerScripts::postAutoloadDump
> @php artisan package:discover --ansi
Discovered Package: barryvdh/laravel-debugbar
Discovered Package: facade/ignition
Discovered Package: fideloper/proxy
Discovered Package: fruitcake/laravel-cors
Discovered Package: laravel/tinker
Discovered Package: laravel/ui
Discovered Package: nesbot/carbon
Discovered Package: nunomaduro/collision
Discovered Package: spatie/laravel-permission
Discovered Package: yajra/laravel-datatables-oracle
Package manifest generated successfully.



- tambahklan kode di 
head.blade.php 

css data tabel 


  <!-- pertemuan ke 14 -> DataTables -->
        <link rel="stylesheet" href="{{ asset('assets/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css') }}">
       



<!-- DataTables -->
<script src="{{ asset('assets/bower_components/datatables.net/js/jquery.dataTables.min.js') }}"></script>
<script src="{{ asset('assets/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js') }}"></script>



- buat folder di dalam view admin
folder author 
- index.blade.php 




- terminal

- AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan make:controller Admin\\AuthorController --resource
Controller created successfully.

- nasuk fike 

AuthorController.php 




- route / admin 

Route::get('/author','AuthorController@index')->name('author.index');




4. 

5. PERTEMUAN KE 15 

MENAMPILKAN DATA PENULIS IMPLEMENTASI DENGAN LARAVEL DATATABLE

-


-

- nasuk fike 

AuthorController.php 

 

return datatables()->of(User::query())->toJson();


- buat controller baru 

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan make:controller Admin\\DataController
Controller created successfully.


- untuk menampilkan data penulis 

- buat methid 

use App\Author; // add pertm ke 15 



 public function authors()
    {
        return datatables()->of(Author::query())->toJson();
    }





- membuat route 

Route::get('/author/data','DataController@authors')->name('author.data');


SUKSES


6.

7.

8.

9.

10.



PERTEMUAN KE 16 
MEMBUAT FUNGSI TAMBAH PENULIS 


1.

2.

3.

4.

5.

6.

7.

8.

9.

10.


PERTEMUAN KE 17 
MEMBUAT FUNGSI EDIT DATA AUTHOR 


-tambahkan index column dari yajradatatable 

https://yajrabox.com/docs/laravel-datatables/master/index-column

 ->addIndexColumn()

3. Route 
-admin 
Route::get('/author/{author}/edit','AuthorController@edit')->name('author.edit');
Route::put('/author/{author}','AuthorController@update')->name('author.update');




1. model 

-Author.php

   public $timestamps = false;

    // protected $fillable = ['name'];
    protected $guarded = []; // fpenggant $fillable tidak usah menambahkan isi array lagi 


VIEW
-edit.blade.php 

@extends('admin.templates.default')

@section('content')
    <div class="box">
        <div class="box-header">
            <h2 class="box-title">EDIT DATA AUTHOR</h2>
        </div>

            <div class="box-body">
                <form action="{{ route('admin.author.update', $author) }}" method="POST">
                @csrf
                @method("PUT")

                    <div class="form-group">
                         <label for="">NAMA</label>
                            <input type="text" name="name" class="form-control" placeholder="Masukkan Nama Penulis"
                            value="{{ $author->name }}">
                    </div>

                    <div class="form-group">
                        <input type="submit" value="Ubah" class ="btn btn-primary">
                    </div>
                </form>
            </div>
    </div>


@endsection







1. DataController.php 

  public function authors()
    {
        //return datatables()->of(Author::query())->toJson(); // ASC
        return datatables()->of(Author::orderBy('name','ASC'))
                ->addIndexColumn()
                ->toJson(); // DESC
    }




ADA CODE TAMBAHAN UNTUK UPDATE DATA 




   public function authors()
    {
        $author = Author::orderBy('name','ASC');
        //return datatables()->of(Author::query())->toJson(); // ASC
        return datatables()->of($author)
                ->addColumn('action', function(Author $author){
                  return '<a href="' . route('admin.author.edit', $author). '" class="btn btn-warning">Edit</a>'; }) // add column edit
                ->addIndexColumn()
                ->toJson(); // DESC
    }





2. AuthorController.php 


  public function edit(Author $author)
    {
        // dd($author);
        return view('admin.author.edit', ['author' => $author,]);
    }




 public function update(Request $request, Author $author)
    {
        //
        $author->update($request->only('name'));

        return redirect()->route('admin.author.index');

    }




EDIT DAN UPDATE DATA AUTHOR SUKSES 


4. perte 18 

MEMBUAT FUNGSI DELETE AUTHOR 

-dokumentasi 

Add Column with View
You can use view to render your added column by passing the view path as the second argument on addColumn api.

use DataTables;

Route::get('user-data', function() {
    $model = App\User::query();

    return DataTables::eloquent($model)
                ->addColumn('intro', 'users.datatables.intro')
                ->toJson();
});
Then create your view on resources/views/users/datatables/intro.blade.php.

Hi {{ $name }}!



- DataController.php 

            '<a href="' . route('admin.author.edit', $author). '" class="btn btn-warning">Edit</a>
                         <a href="' . route('admin.author.edit', $author). '" class="btn btn-danger">Hapus</a>
                  '; }) // add column edit

kode ini pindah di action.blade.php 



5. 
- action.blade.php 

<a href="' . route('admin.author.edit', $model). '" class="btn btn-warning">Edit</a>
<a href="' . route('admin.author.edit', $model). '" class="btn btn-danger">Hapus</a>



<!-- route di ubah menjadi  -->
<a href="{{ route('admin.author.edit', $model) }}" class="btn btn-warning">Edit</a>
<button href="{{ route('admin.author.destroy', $model) }}" class="btn btn-danger" id="delete">Hapus</button>

<!-- // di taruh di sini untuk bisa tertrigger , karna menggunakan dataTable -->
<script>
    // membuat request ajax menggunakan element 
    $('button#delete').on('click', function(e) { // error
        e.preventDefault(); // belum jalan

        // membuat variavel 
        var href = $(this).attr('href');

        // membuat tombol trigger untuk tombol form 
        document.getElementById('deleteForm').action = href;
        document.getElementById('deleteForm').submit();
    })
</script>





6. membuat route 

Route::delete('/author/{author}','AuthorController@destroy')->name('author.destroy');



7.AuthorController.php 

terjadi error dan belum selesai 



8. membuat validasi author 

 ERROE DATA YANG DI DELETE BELUM TERSELESAIKAN KARNA MASIH DI RIDERECT 






9. MENAMBAHKAN KONFIRMASI SEBELUM HAPUS DATA PENULIS 

- MENGGUNAKAN SWICT ALERT 

-action.blade.php 

 <script src="https://cdn.jsdelivr.net/npm/promise-polyfill"></script>



 // alert
            Swal.fire({
                title: 'Apakah Kamu yakin hapus data ini',
                text: 'Data yang sudah di hapus tidak datap di kembalikan',
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Ya, Hapus saja!'
                }).then((result) => {
                    if (result.value) {
                        Swal.fire(
                            'Deleted!',
                            'Your file has been deleted.',
                            'success'
                        )
                    }
                })


            // swal({
            //         title: "Apakah Yang ingin menghapus Id ini ...?",
            //         text: "Data yang sudah di hapus tidak bisa di kembalikan !",
            //         icon: "warning",
            //         buttons: true,
            //         dangerMode: true,
            //         })
            //         .then((willDelete) => {
            //         if (willDelete) {
            //             swal("Poof! Your imaginary file has been deleted!", {
            //             icon: "success",
            //             });
            //         } else {
            //             swal("Your imaginary file is safe!");
            //         }
            //     });



PERTEMUAN KE 19 MENIT:02:00

ERROR,, KETIKA DI HAPUS BELUM BISA DI RIDERICT KE HALAMAN HOME 



10.


PERTEMUAN KE 20 
MANAMBAHKAN FLASH MESSAGE

1. index.blade.php
    @include('admin.templates.partials.alerts')



2. AuthorController.php 

-
   public function store(Request $request)
    {
        // memanggil model 
        Author::create($request->only('name'));

        // return redirect()->route('admin.author.index');
        return redirect()->route('admin.author.index')
                ->with('success','Data Penulis berhasil di tambahkan');
        
    }



   public function update(Request $request, Author $author)
    {
        //
        $author->update($request->only('name'));

        //return redirect()->route('admin.author.index');
        return redirect()->route('admin.author.index')
                ->with('info','Data Penulis berhasil di Update');

    }



  public function destroy(Author $author) // route model bailding , 
    {
        //
        $author->delete();

        return redirect()->route('admin.author.index')
                ->with('danger','Data Penulis berhasil di Delete');
    }






1. tambahkan session 

-folder partials

-alerts.blade.php


@if(session('success'))
    <div class="alert alert-success">{{ session('success')}}</div>
@endif

@if(session('info'))
    <div class="alert alert-info">{{ session('info')}}</div>
@endif

@if(session('danger'))
    <div class="alert alert-danger">{{ session('danger')}}</div>
@endif


-

-

-


 SUKSES 



2.



PERTEMUAN KE 21 MENGGANTI ALERT DENGA BOOTSTRAP NOTIFY

http://bootstrap-notify.remabledesigns.com/

pilih download 

masuk ke gitbuh 

pilih 
- bootstrap-notify.min.js

kemudian raw 
dan copy codenya 

- masuk di folder public 

-assets 

-plugins
buat file 
bs-notiify.min.js 

copy code dari GitHub di sini 

panggil bs-notiify.min.js 

- file alert.blade.php 
	edit sis session 



- masuk di index.blade.php 
 <!-- memanggil bs-notiify.min.js -->
    <script src="{{ asset('/assets/plugins/bs.notify.min.js')}}"></script>
    @include('admin.templates.partials.alerts') 



<script>
    @if(session('success'))
        // code jquery 
            $.notify({
                // options
                message: '{{ session('success')}}' 
            },{
                // settings
                type: 'success'
            });
    @endif

    @if(session('info'))
            $.notify({
                // options
                message: '{{ session('info')}}' 
            },{
                // settings
                type: 'info'
            });
    @endif

    @if(session('danger'))
            $.notify({
                // options
                message: '{{ session('danger')}}' 
            },{
                // settings
                type: 'danger'
            });
    @endif
</script>



3.

4.



PERTEMUAN KE 22 
JUDUL HALAMAN DINAMIS 


5.

6. -
AuthorCOntroller.php 

 'title' => 'Data Penulis'

 'title' => 'Tambah Data Penulis'

 'title' => 'Edit Data Penulis',






7. - Breadcrumbs

install di Github 

https://github.com/davejamesmiller/laravel-breadcrumbs


- buka terminal jalankan perintah 

composer require davejamesmiller/laravel-breadcrumbs:5.x

$ composer require davejamesmiller/laravel-breadcrumbs:5.x
./composer.json has been updated
Loading composer repositories with package information
Updating dependencies (including require-dev)
Package operations: 1 install, 0 updates, 0 removals
  - Installing davejamesmiller/laravel-breadcrumbs (5.3.2): Downloading (connectDownloading (100%)
Writing lock file
Generating optimized autoload files
> Illuminate\Foundation\ComposerScripts::postAutoloadDump
> @php artisan package:discover --ansi
Discovered Package: barryvdh/laravel-debugbar
Discovered Package: davejamesmiller/laravel-breadcrumbs
Discovered Package: facade/ignition
Discovered Package: fideloper/proxy
Discovered Package: fruitcake/laravel-cors
Discovered Package: laravel/tinker
Discovered Package: laravel/ui
Discovered Package: nesbot/carbon
Discovered Package: nunomaduro/collision
Discovered Package: spatie/laravel-permission
Discovered Package: yajra/laravel-datatables-oracle
Package manifest generated successfully.



- masuk di ikumentasi dan ikuti instruksinya

route

file 

breadcrumbs.php

<?php 


// Home
// Breadcrumbs::for('home', function ($trail) {
//     $trail->push('Home', route('home'));
// });

// Home
Breadcrumbs::for('admin.dashboard', function ($trail) {
    $trail->push('Beranda Oyeachh', route('admin.dashboard'));
});

//Author
Breadcrumbs::for('admin.author.index', function ($trail) {
    $trail->push('Beranda Oyeachh', route('admin.dashboard'));
    $trail->push('Penulis Ayeee', route('admin.author.index'));
});

//Author Tambah Penulis
Breadcrumbs::for('admin.author.create', function ($trail) {
    $trail->push('Beranda Oyeachh', route('admin.dashboard'));
    $trail->push('Penulis Ayeee', route('admin.author.index'));
    $trail->push('Tambah Penulis Oyeach', route('admin.author.create'));
});

//Author Edit , TAMBAHKAN PASING DATA $author
Breadcrumbs::for('admin.author.edit', function ($trail, $author) {
    $trail->push('Beranda Oyeachh', route('admin.dashboard'));
    $trail->push('Penulis Ayeee', route('admin.author.index'));
    $trail->push('Edit Penulis Ayeee', route('admin.author.edit', $author));
});


- 
file

default.blade.php 

  <section class="content-header">
      <h1>
        <!-- tertemuan ke 22 Breadcrumbs, terhubung ke route breadcrumbs.php -->
      {{  Breadcrumbs::current()->title }}
      </h1>
     {{  Breadcrumbs::render() }}
    
    </section>


-


-

SUKSES 



8.

9.

10.

PERTEMUAN KE 24 ROUTE DENGAN RESOURCES 


- memebuat Route Author dengan Resources 

php artisan make:controller admin\\BookController --resource












PERTEMUAN KE 25 

MENAMPILKAN DATA MODAL BUKU

- membuat fungsi untuk tampilkan data JSON terlebih dahulu 

- DataController.php 
   // book buku 
   // book buku
    public function books()
    {
        $books = Book::orderBy('title', 'ASC');

        return datatables()->of($books)
            ->addColumn('author', function (Book $model) {
                return $model->author->name; // untuk memanggil relasi dan mengubah tampilan id angga menjadi nama author
            })
            ->editColumn('cover', function (Book $model) {
                return '<img src="' . $model->cover . '"height="150px">'; // untuk merubah cover menjadi format img
            })
            ->addColumn('action', 'admin.book.action') // mengarah ke action.blade.php
            ->addIndexColumn() // tambah colom
            ->rawColumns(['cover', 'action']) // di confert menjasdi format html
            ->toJson(); // DESC
    }





1. membuat ROute admin
- 
Route::get('/book/data','DataController@books')->name('book.data');



2. membuat fungi untuk menampilkan viewnya 
-terminal 

$ php artisan make:controller admin\\BookController --resource
Controller created successfully.

- BookController.php 
   public function index()
    {
        //
        return view('admin.book.index',[
            'title' => 'Data Buku',
        ]);
    }




- 


3. bikin Breadcrumbs.php

- breadcrumbs.php

//Book index
Breadcrumbs::for('admin.book.index', function ($trail) {
    $trail->push('Beranda Oyeachh', route('admin.dashboard'));
    $trail->push('Book Ayeee', route('admin.book.index'));
});


//Author Tambah BUku
Breadcrumbs::for('admin.book.create', function ($trail) {
    $trail->push('Beranda Oyeachh', route('admin.dashboard'));
    $trail->push('Buku Ayeee', route('admin.book.index'));
    $trail->push('Tambah Buku Oyeach', route('admin.book.create'));
});


reload google dan sudah tertampil data di applikasi 



4. BiKin Relasi 

Book.php 


//relasi ke Author, satu Penulis punya banyak buku
    public function author()
    {
        return $this->belongsTo(Author::class);
    }






5. Relasi ke Author  
Author.php 


// Berelasi ke Book
    public function books()
    {
        return $this->hasMany(Book::class);
    }







7. DataController.php 

// book buku
      public function books()
      {
          $books = Book::orderBy('title','ASC');

          return datatables()->of($books)
                    ->addColumn('author', function(Book $model) {
                        return $model->author->name; // untuk memanggil relasi dan mengubah tampilan id angga menjadi nama author
                    })
                  ->editColumn('cover', function(Book $model) {
                      return '<img src="'. $model->cover .'">'; // untuk merubah cover menjadi format img
                  })
                  ->addIndexColumn() // tambah colom
                   ->rawColumns(['cover']) // di confert menjasdi format html
                  ->toJson(); // DESC





6. tampilan JSON 

id	"39"
author_id	"7"
title	"Accusamus sed omnis ipsa."
description	"Cum sint dolor veritatis tenetur quae dolorum aut vero omnis ducimus eos impedit esse et sed labore quidem impedit doloremque quia nemo suscipit unde voluptas quas aut corrupti nesciunt quia nihil natus pariatur tempora perferendis est fugiat vel corrupti a in eveniet iusto sit praesentium inventore hic repellendus at officia pariatur qui ut illum aut veniam pariatur."
cover	"<img src=\"https://picsum.photos/seed/6/200/300\">"
qty	"19"
created_at	"2020-03-25T15:08:52.000000Z"
updated_at	"2020-03-25T15:08:52.000000Z"
author	"Mireille Hoeger"
DT_RowIndex	"1"




8. index.blade.php 


-
-
-


9. head.blade.php 

 @stack('select2css')
tempatkan di atas bootstrap 


10. create.blade.php 


enctype="multipart/form-data"




@push('select2css')
    <link rel="stylesheet" href="{{ asset('assets/bower_components/select2/dist/css/select2.min.css')}}">
@endpush

@push('scripts')
    <script src="{{ asset('assets/bower_components/select2/dist/js/select2.full.min.js')}}"></script>

    <script>
        $('.select2').select2();
    </script>
@endpush









PERTEMUAN KE 26 

MEMBUAT FROM TAMBAH BUKU 



1. index.blade.php

-
<div class="box-header">
              <h3 class="box-title">DATA BUKU</h3>
              <a href="{{ route('admin.book.create')}}" class="btn btn-primary">TAMBAH DATA BUKU</a>
         </div>



2.BookController.php 

-

 public function create()
    {
        //
        return view('admin.book.create',[
            'title' => 'Tambah Buku',
            'authors' => Author::orderBy('name','ASC')->get(),// memanggil dara relasi author dengan formai nama
        ]);
    }



3. breadcrum.php 

-
//Author Tambah BUku
Breadcrumbs::for('admin.book.create', function ($trail) {
    $trail->push('Beranda Oyeachh', route('admin.dashboard'));
    $trail->push('Buku Ayeee', route('admin.book.index'));
    $trail->push('Tambah Buku Oyeach', route('admin.book.create'));
});




4. create.blade.php 



<div class="box-body">
                <form action="{{ route('admin.book.store') }}" method="POST" enctype="multipart/form-data">
                @csrf
                    <div class="form-group @error('title') has-error @enderror">
                        <label for="">JUDUL</label>
                        <!-- //value="{{ old('title')}}"  , Validasi untuk tetap menampilkan nilai di form-->
                        <input type="text" name="title" class="form-control" placeholder="Masukkan Nama Penulis" value="{{ old('title') }}">
                        @error('title')
                            <span class="help-block">{{ $message}}</span>
                        @enderror
                    </div>

                    <div class="form-group @error('description') has-error @enderror">
                        <label for="">DESKRIPSI</label>

                        <textarea name="description" id="" row="3" class="form-control" placeholder="Masukkan Deskripsi Buku">{{ old('description') }}</textarea>
                        @error('description')
                            <span class="help-block">{{ $message}}</span>
                        @enderror
                    </div>

                    <div class="form-group @error('author') has-error @enderror">
                        <label for="">PENULIS</label>

                        <select name="author_id" id="" class="form-control select2">
                            @foreach ($authors as $author)
                                    <option value="{{ $author->id}}">{{ $author->name}}</option>
                            @endforeach
                        </select>
                        @error('author')
                            <span class="help-block">{{ $message}}</span>
                        @enderror
                    </div>

                    <div class="form-group @error('cover') has-error @enderror">
                        <label for="">COVER</label>
                        <input type="file" name="cover" class="form-control">
                        @error('cover')
                            <span class="help-block">{{ $message}}</span>
                        @enderror
                    </div>

                    <div class="form-group @error('qty') has-error @enderror">
                        <label for="">QUANTITY</label>
                        <input type="text" name="qty" class="form-control" placeholder="Masukkan Jumlah Buku" value="{{ old('qty') }}">
                        @error('qty')
                            <span class="help-block">{{ $message}}</span>
                        @enderror
                    </div>

                    <div class="form-group">
                        <input type="submit" value="Tambah" class ="btn btn-primary">
                    </div>
                </form>
            </div>





5.

6.

7.

8.

9.

10.



PERTEMUAN KE 27 
MEMBUAT FUNGSI SIMPAN BUKU MENANGANI ASSET GAMBARNYA 




1. BookController.php 

- // buat tambah create buku
        $cover = null; // validati cover biar ketika tidak ada cover yang di input , akan tampil cover default


-

-

-



2. folder config 

file 

filesystems.php 

'disks' => [

        'local' => [
            'driver' => 'local',
            // 'root' => storage_path('app'),
            'root' => public_path(),
            // pertemu ke 27 format images
        ],



3.

4.

5. PENTING 

untuk formasi tampilan foto/cover images 

- terminal 

php artisan storage:link

$ php artisan storage:link
The [C:\xampp\htdocs\perpus_7\public\storage] link has been connected to [C:\xam
pp\htdocs\perpus_7\storage\app/public].
The links have been created.



-filesystems.php 

6. 

7. merubah migration untuk cover 

-    $table->string('cover')->nullable()->default(null);


- terminal dan migraton ulang 

-


8.

9. membuat function di Model Boom 

Book.php

-
  public function getCover()
    {
        if (substr($this->cover, 0, 5) == "https") {
            return $this->cover;
        }

        if ($this->cover) {
            return asset($this->cover);
        }

        return 'https://via.placeholder.com/150x200.png?text=No+Cover';
    }


-
-
-
 

10. MENGAMBIL GAMBAR DARI GOOGLE

PLACEHOLDER IMAGE 

https://placeholder.com/




1. DataController.php 

 ->editColumn('cover', function (Book $model) {
                return '<img src="' . $model->getCover() . '"height="150px">'; // untuk merubah cover menjadi format img
            })



2.

3.



PERTEMUAN KE 28 

MEMBUAT FUNCTION UPDATE BUKU 

1.BookController.php 

- use Illuminate\Support\Facades\Storage; // import


-  public function update(Request $request, Book $book)
    {
        //
        $this->validate($request, [
            'title' => 'required',
            'description' => 'required|min:20',
            'author_id' => 'required',
            'cover' => 'file|image', // dalam bentuk file format image
            'qty' => 'required|numeric' // format jumlah angga
        ]);

        // buat tambah create buku
        $cover = $book->cover; // akan tampil ini jika tidak upload file cover

        // jika upload file akan eksekusi kode di bawah
        if ($request->hasFile('cover')) {
            Storage::delete($book->cover);  // menghapus cover yang lama dan di ganti dengan cove yang baru
            $cover = $request->file('cover')->store('assets/covers');
        }

        $book->update([
            'title' => $request->title,
            'description' => $request->description,
            'author_id' => $request->author_id,
            'cover' => $cover,
            'qty' => $request->qty,
        ]);

        // jika selesai di create arahkan ke redirect
        return redirect()->route('admin.book.index')->withSuccess('Data Buku berhasil di Update');

    }

-
-


2. DataController.php 

-
  public function books()
    {
        $books = Book::orderBy('title', 'ASC');

        return datatables()->of($books)
            ->addColumn('author', function (Book $model) {
                return $model->author->name; // untuk memanggil relasi dan mengubah tampilan id angga menjadi nama author
            })
            ->editColumn('cover', function (Book $model) {
                return '<img src="' . $model->getCover() . '"height="150px">'; // untuk merubah cover menjadi format img
            })
            ->addColumn('action', 'admin.book.action') // mengarah ke action.blade.php
            ->addIndexColumn() // tambah colom
            ->rawColumns(['cover', 'action']) // di confert menjasdi format html
            ->toJson(); // DESC
    }





3. breadcrumbs.php 

//Book Edit , TAMBAHKAN PASING DATA $book
Breadcrumbs::for('admin.book.edit', function ($trail, $book) {
    $trail->push('Beranda Oyeachh', route('admin.dashboard'));
    $trail->push('Buku Ayeee', route('admin.book.index'));
    $trail->push('Edit Buku Ayeee', route('admin.book.edit', $book));
});





4. edit.blade.php 

@extends('admin.templates.default')
@section('content')
    <div class="box">
        <div class="box-header">
            <h2 class="box-title">TAMBAH BUKU</h2>
        </div>

            <div class="box-body">
                <form action="{{ route('admin.book.update', $book) }}"
                 method="POST" enctype="multipart/form-data">
                @csrf
                @method("PUT")
                    <div class="form-group @error('title') has-error @enderror">
                        <label for="">JUDUL</label>
                        <!-- //value="{{ old('title')}}"  , Validasi untuk tetap menampilkan nilai di form-->
                        <input type="text" name="title" class="form-control" placeholder="Masukkan Nama Penulis" value="{{ $book->title ?? old('title') }}">
                        @error('title')
                            <span class="help-block">{{ $message}}</span>
                        @enderror
                    </div>

                    <div class="form-group @error('description') has-error @enderror">
                        <label for="">DESKRIPSI</label>

                        <textarea name="description" id="" row="3" class="form-control" placeholder="Masukkan Deskripsi Buku">{{ $book->description ?? old('description') }}</textarea>
                        @error('description')
                            <span class="help-block">{{ $message}}</span>
                        @enderror
                    </div>

                    <div class="form-group @error('author') has-error @enderror">
                        <label for="">PENULIS</label>

                        <select name="author_id" id="" class="form-control select2">
                            @foreach ($authors as $author)
                                    <option value="{{ $author->id}}"
                                        @if ($author->id === $book->author_id)
                                                selected
                                            @endif
                                        >
                                        {{ $author->name}}
                                    </option>
                            @endforeach
                        </select>
                        @error('author')
                            <span class="help-block">{{ $message}}</span>
                        @enderror
                    </div>

                    <div class="form-group @error('cover') has-error @enderror">
                        <label for="">COVER</label>
                        <input type="file" name="cover" class="form-control">
                        @error('cover')
                            <span class="help-block">{{ $message}}</span>
                        @enderror
                    </div>

                    <div class="form-group @error('qty') has-error @enderror">
                        <label for="">QUANTITY</label>
                        <input type="text" name="qty" class="form-control" placeholder="Masukkan Jumlah Buku" value="{{ $book->qty ?? old('qty') }}">
                        @error('qty')
                            <span class="help-block">{{ $message}}</span>
                        @enderror
                    </div>

                    <div class="form-group">
                        <input type="submit" value="Simpan" class ="btn btn-primary">
                    </div>
                </form>
            </div>
    </div>
@endsection

@push('select2css')
    <link rel="stylesheet" href="{{ asset('assets/bower_components/select2/dist/css/select2.min.css')}}">
@endpush

@push('scripts')
    <script src="{{ asset('assets/bower_components/select2/dist/js/select2.full.min.js')}}"></script>

    <script>
        $('.select2').select2();
    </script>
@endpush





5.

6.

7. 




PERTEMUAN KE 29 

MENGHAPUS DATA BUKU 



8. BookController.php

 public function destroy(Book $book)
    {
        //
        $book->delete();

        return redirect()->route('admin.book.index')->withDanger('Data Buku berhasil di Delete');


    }



9.

10.





PERTEMUAN KE 30 

TIPS MENANGANI ASSET PROJECT 

DATA BUKU 


menghendel asset saat kita tidak butuh asset di tampilan 



1.

2. index.blade.php 

butuh css dan js 



3.

4.

5.

6.

7.

8.

9.

10.


BACK UP TEMPLATE 

head.blade.php 

// pertemuan ke 30
@stack('styles')



 <!-- Morris chart -->
        <link rel="stylesheet" href="{{ asset('assets/bower_components/morris.js/morris.css') }}">
        <!-- jvectormap -->
        <link rel="stylesheet" href="{{ asset('assets/bower_components/jvectormap/jquery-jvectormap.css') }}">
        <!-- Date Picker -->
        <link rel="stylesheet" href="{{ asset('assets/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css') }}">
        <!-- Daterange picker -->
        <link rel="stylesheet" href="{{ asset('assets/bower_components/bootstrap-daterangepicker/daterangepicker.css') }}">
        <!-- bootstrap wysihtml5 - text editor -->
        <link rel="stylesheet" href="{{ asset('assets/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css') }}">




 <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->



1.  


1. pindah css dan js dataTable ke book index.balde 

// pertemua ke 30 pindah datatable
@push('styles')
    <link rel="stylesheet" href="{{ asset('assets/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css') }}">
@endpush




2. author index.blade.php 

// pertemua ke 30 pindah datatable
@push('styles')
    <link rel="stylesheet" href="{{ asset('assets/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css') }}">
@endpush

3.

4.

5.

 script.blade.php 


<!-- DataTables --> kode di pindah 

<script src="{{ asset('assets/bower_components/datatables.net/js/jquery.dataTables.min.js') }}"></script>
<script src="{{ asset('assets/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js') }}"></script>



6.

7. koe 

scripts.blade.php 

<!-- Morris.js charts -->
<script src="{{ asset('assets/bower_components/raphael/raphael.min.js') }}"></script>
<script src="{{ asset('assets/bower_components/morris.js/morris.min.js') }}"></script>
<!-- Sparkline -->
<script src="{{ asset('assets/bower_components/jquery-sparkline/dist/jquery.sparkline.min.js') }}"></script>
<!-- jvectormap -->
<script src="{{ asset('assets/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js') }}"></script>
<script src="{{ asset('assets/plugins/jvectormap/jquery-jvectormap-world-mill-en.js') }}"></script>
<!-- jQuery Knob Chart -->
<script src="{{ asset('assets/bower_components/jquery-knob/dist/jquery.knob.min.js') }}"></script>
<!-- daterangepicker -->
<script src="{{ asset('assets/bower_components/moment/min/moment.min.js') }}"></script>
<script src="{{ asset('assets/bower_components/bootstrap-daterangepicker/daterangepicker.js') }}"></script>
<!-- datepicker -->
<script src="{{ asset('assets/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js') }}"></script>
<!-- Bootstrap WYSIHTML5 -->
<script src="{{ asset('assets/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js') }}"></script>



8.

9.

10.


PERTEMUAN KE 31 
MEMBUAT TAMPILAN HALAMAN DEPAN 



1. instal 
 SDN materialize 



2. Route 

web.php 

 Route::get('/', function () {
    return view('homepage');
});






3. frontend

buat fiel 

homegase.blade.php

view 


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    {{--  icon   --}}
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>Home</title>
</head>
<body>

        <nav>
            <div class="nav-wrapper">
            <a href="#!" class="brand-logo">PERPUS</a>
            <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">
                <li><a href="#">LOGIN</a></li>
                <li><a href="#">REGISTER</a></li>
                {{--  <li><a href="collapsible.html">Javascript</a></li>
                <li><a href="mobile.html">Mobile</a></li>  --}}
            </ul>
            </div>
        </nav>

            <ul class="sidenav" id="mobile-demo">
                <li><a href="#">LOGIN</a></li>
                <li><a href="#">REGISTER</a></li>
                {{--  <li><a href="collapsible.html">Javascript</a></li>
                <li><a href="mobile.html">Mobile</a></li>  --}}
            </ul>


                <div class="container">
                    <h2>Keleksi Buku</h2>
                   <blockquote>
                    <p class="flow-text">Koleksi Buku yang bisa kamu baca & pinjam</p>
                   </blockquote>
                    <div class="row">
                        @for ($i = 0; $i <  20; $i++)
                        <div class="col s12 m6">
                            <div class="card horizontal hoverable">
                                <div class="card-image">
                                <img src="https://lorempixel.com/100/190/nature/6">
                                </div>
                                <div class="card-stacked">
                                <div class="card-content">
                                    <p>I am a very simple card. I am good at containing small bits of information.</p>
                                </div>
                                <div class="card-action">
                                    <a href="#">This is a link</a>
                                </div>
                                </div>
                            </div>

                        </div>


                        @endfor
                    </div>

                    {{--  pagimation  --}}
                        <ul class="pagination center">
                            <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
                            <li class="active"><a href="#!">1</a></li>
                            <li class="waves-effect"><a href="#!">2</a></li>
                            <li class="waves-effect"><a href="#!">3</a></li>
                            <li class="waves-effect"><a href="#!">4</a></li>
                            <li class="waves-effect"><a href="#!">5</a></li>
                            <li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
                        </ul>
                </div>


    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        M.AutoInit();
    </script>

</body>
</html>








4. 



PERTEMUAN KE 32 

MEMBUAT TEMPLATE HALAMAN DEPAN 


5. buat 
folder templates

folder partials

fiel 

5. default.blade.php 



<!DOCTYPE html>
<html lang="en">
@include('frontend.templates.partials.head')
<body>
        {{-- navigation  --}}
    @include('frontend.templates.partials.navigation')

            {{-- content --}}
                <div class="container">
                  @yield('content')
                </div>


@include('frontend.templates.partials.scripts')
</body>
</html>





6. head.blade.php  



<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Compiled and minified CSS install materialize -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    {{--  icon   --}}
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>Home</title>
</head>





7. navigation.blade.php 



<nav>
    <div class="nav-wrapper">
    <a href="#!" class="brand-logo">PERPUS</a>
    <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    <ul class="right hide-on-med-and-down">
        <li><a href="#">LOGIN</a></li>
        <li><a href="#">REGISTER</a></li>
        {{--  <li><a href="collapsible.html">Javascript</a></li>
        <li><a href="mobile.html">Mobile</a></li>  --}}
    </ul>
    </div>
</nav>

<ul class="sidenav" id="mobile-demo">
    <li><a href="#">LOGIN</a></li>
    <li><a href="#">REGISTER</a></li>
    {{--  <li><a href="collapsible.html">Javascript</a></li>
    <li><a href="mobile.html">Mobile</a></li>  --}}
</ul>






8. scripts.blade.php 




<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
    M.AutoInit();
</script>





9. homepage.blade.php 


@extends('frontend.templates.default')

@section('content')
<h2>Keleksi Buku</h2>
<blockquote>
 <p class="flow-text">Koleksi Buku yang bisa kamu baca & pinjam</p>
</blockquote>
 <div class="row">
     @for ($i = 0; $i <  20; $i++)
     <div class="col s12 m6">
         <div class="card horizontal hoverable">
             <div class="card-image">
             <img src="https://lorempixel.com/100/190/nature/6">
             </div>
             <div class="card-stacked">
             <div class="card-content">
                 <p>I am a very simple card. I am good at containing small bits of information.</p>
             </div>
             <div class="card-action">
                 <a href="#">This is a link</a>
             </div>
             </div>
         </div>

     </div>


     @endfor
 </div>

 {{--  pagimation  --}}
     <ul class="pagination center">
         <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
         <li class="active"><a href="#!">1</a></li>
         <li class="waves-effect"><a href="#!">2</a></li>
         <li class="waves-effect"><a href="#!">3</a></li>
         <li class="waves-effect"><a href="#!">4</a></li>
         <li class="waves-effect"><a href="#!">5</a></li>
         <li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
     </ul>
@endsection







10. route 

web.php 

Route::get('/', function () {
    return view('homepage');
    //return view('frontend.templates.default');
});








11. 


content 


  <h2>Keleksi Buku</h2>
                   <blockquote>
                    <p class="flow-text">Koleksi Buku yang bisa kamu baca & pinjam</p>
                   </blockquote>
                    <div class="row">
                        @for ($i = 0; $i <  20; $i++)
                        <div class="col s12 m6">
                            <div class="card horizontal hoverable">
                                <div class="card-image">
                                <img src="https://lorempixel.com/100/190/nature/6">
                                </div>
                                <div class="card-stacked">
                                <div class="card-content">
                                    <p>I am a very simple card. I am good at containing small bits of information.</p>
                                </div>
                                <div class="card-action">
                                    <a href="#">This is a link</a>
                                </div>
                                </div>
                            </div>
                        </div>
                        @endfor
                    </div>

                    {{--  pagimation  --}}
                        <ul class="pagination center">
                            <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
                            <li class="active"><a href="#!">1</a></li>
                            <li class="waves-effect"><a href="#!">2</a></li>
                            <li class="waves-effect"><a href="#!">3</a></li>
                            <li class="waves-effect"><a href="#!">4</a></li>
                            <li class="waves-effect"><a href="#!">5</a></li>
                            <li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
                        </ul>

1.







PERTEMUAN KE 33 

MENAMPILKAN DATA BUKU DI HALAMAN DEPAN 






2. terminal 

$ php artisan make:controller Frontend\\BookController
Controller created successfully.




3. BookController.php 

use App\Book; // import



   public function index()
    {
        $books = Book::paginate(10);

        return view('frontend.book.index',[
            'books' => $books,
        ]);
    }



4. index.blade.php 




     @for ($i = 0; $i <  20; $i++)
     <div class="col s12 m6">
         <div class="card horizontal hoverable">
             <div class="card-image">
             <img src="https://lorempixel.com/100/190/nature/6">
             </div>
             <div class="card-stacked">
             <div class="card-content">
                 <p>I am a very simple card. I am good at containing small bits of information.</p>
             </div>
             <div class="card-action">
                 <a href="#">This is a link</a>
             </div>
             </div>
         </div>
     </div>
     @endfor




DI UBAH 




    @foreach ($books as $book)
        <div class="col s12 m6">
            <div class="card horizontal hoverable">
                <div class="card-image">
                <img src="{{ $book->getCover() }}" height="200px">
                </div>
                <div class="card-stacked">
                <div class="card-content">
                    {{-- <h5>{{ $book->title }}</h5> --}}
                    <h6>{{ Str::limit($book->title,30) }}</h6>
                     {{-- <p>{{ $book->description }}</p> --}}
                    <p>{{ Str::limit($book->description, 150) }}</p>
                </div>
                <div class="card-action">
                    <a href="#">PINJAM BUKU</a>
                </div>
                </div>
            </div>
        </div>
    @endforeach





5. navigation.blade.php 

// TAMBAHAN
<div class="navbar-fixed">

</div




<div class="navbar-fixed">
    <nav>
        <div class="nav-wrapper">
        <a href="#!" class="brand-logo">PERPUS</a>
        <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
        <ul class="right hide-on-med-and-down">
            <li><a href="#">LOGIN</a></li>
            <li><a href="#">REGISTER</a></li>
            {{--  <li><a href="collapsible.html">Javascript</a></li>
            <li><a href="mobile.html">Mobile</a></li>  --}}
        </ul>
        </div>
    </nav>
</div>

<ul class="sidenav" id="mobile-demo">
    <li><a href="#">LOGIN</a></li>
    <li><a href="#">REGISTER</a></li>
    {{--  <li><a href="collapsible.html">Javascript</a></li>
    <li><a href="mobile.html">Mobile</a></li>  --}}
</ul>




6.

7.

8.

9.

10.







 PERTEMUAN KE 34 
MEMBUAT PAGINATION CUSTOM 


1. terminal 

- mengetahui vendor apa saja yang ada di laravel kita 


$ php artisan vendor:publish

 Which provider or tag's files would you like to publish?:
  [0 ] Publish files from all providers and tags listed below
  [1 ] Provider: Barryvdh\Debugbar\ServiceProvider
  [2 ] Provider: DaveJamesMiller\Breadcrumbs\BreadcrumbsServiceProvider
  [3 ] Provider: Facade\Ignition\IgnitionServiceProvider
  [4 ] Provider: Fideloper\Proxy\TrustedProxyServiceProvider
  [5 ] Provider: Fruitcake\Cors\CorsServiceProvider
  [6 ] Provider: Illuminate\Foundation\Providers\FoundationServiceProvider
  [7 ] Provider: Illuminate\Mail\MailServiceProvider
  [8 ] Provider: Illuminate\Notifications\NotificationServiceProvider
  [9 ] Provider: Illuminate\Pagination\PaginationServiceProvider
  [10] Provider: Laravel\Tinker\TinkerServiceProvider
  [11] Provider: Spatie\Permission\PermissionServiceProvider
  [12] Provider: Yajra\DataTables\DataTablesServiceProvider
  [13] Tag: breadcrumbs-config
  [14] Tag: config
  [15] Tag: cors
  [16] Tag: datatables
  [17] Tag: flare-config
  [18] Tag: ignition-config
  [19] Tag: laravel-errors
  [20] Tag: laravel-mail
  [21] Tag: laravel-notifications
  [22] Tag: laravel-pagination
  [23] Tag: migrations
 > 22
2?[K2?[K

?[32mCopied Directory?[39m ?[33m[\vendor\laravel\framework\src\Illuminate\Pagina
tion\resources\views]?[39m ?[32mTo?[39m ?[33m[\resources\views\vendor\pagination
]?[39m
?[32mPublishing complete.?[39m



// untuk pagination ketik perintah angga sesua kode di atas 


2.

3. buat file di dalam folder vendor 

folder pagination 

file 

materialize.blade.php 







isi fiel di copy dari default.blade.php 

@if ($paginator->hasPages())
    <nav>
        <ul class="pagination">
            {{-- Previous Page Link --}}
            @if ($paginator->onFirstPage())
                <li class="disabled" aria-disabled="true" aria-label="@lang('pagination.previous')">
                    <span aria-hidden="true">&lsaquo;</span>
                </li>
            @else
                <li>
                    <a href="{{ $paginator->previousPageUrl() }}" rel="prev" aria-label="@lang('pagination.previous')">&lsaquo;</a>
                </li>
            @endif

            {{-- Pagination Elements --}}
            @foreach ($elements as $element)
                {{-- "Three Dots" Separator --}}
                @if (is_string($element))
                    <li class="disabled" aria-disabled="true"><span>{{ $element }}</span></li>
                @endif

                {{-- Array Of Links --}}
                @if (is_array($element))
                    @foreach ($element as $page => $url)
                        @if ($page == $paginator->currentPage())
                            <li class="active" aria-current="page"><span>{{ $page }}</span></li>
                        @else
                            <li><a href="{{ $url }}">{{ $page }}</a></li>
                        @endif
                    @endforeach
                @endif
            @endforeach

            {{-- Next Page Link --}}
            @if ($paginator->hasMorePages())
                <li>
                    <a href="{{ $paginator->nextPageUrl() }}" rel="next" aria-label="@lang('pagination.next')">&rsaquo;</a>
                </li>
            @else
                <li class="disabled" aria-disabled="true" aria-label="@lang('pagination.next')">
                    <span aria-hidden="true">&rsaquo;</span>
                </li>
            @endif
        </ul>
    </nav>
@endif


4.




belum 
REVISI ULANG PAGINATION 


5.

6.

7.

8.

9.

10.





@if ($paginator->hasPages())
    <nav>
        {{-- add --}}
        <ul class="pagination center">
            {{-- Previous Page Link --}}
            @if ($paginator->onFirstPage())
                <li class="disabled" aria-disabled="true" aria-label="@lang('pagination.previous')">
                    {{-- add --}}
                    <i class="material-icons">chevron_left</i>
                </li>
            @else
                <li>
                    <a href="{{ $paginator->previousPageUrl() }}" rel="prev"
                        aria-label="@lang('pagination.previous')">
                        <i class="material-icons">chevron_left</i>
                    </a>
                    {{-- <i class="material-icons">chevron_left</i> // add --}}
                </li>
            @endif

            {{-- Pagination Elements --}}
            @foreach ($elements as $element)
                {{-- "Three Dots" Separator --}}
                @if (is_string($element))
                    <li class="disabled" aria-disabled="true">
                        <span>{{ $element }}</span>
                    </li>
                @endif

                {{-- Array Of Links --}}
                @if (is_array($element))
                    @foreach ($element as $page => $url)
                        @if ($page == $paginator->currentPage())
                            <li class="active" aria-current="page">
                                <a href="#">{{ $page }}</a>
                            </li>
                        @else
                            <li>
                                <li class="waves-effect"><a href="{{ $url }}">{{ $page }}</a></li>
                            </li>
                        @endif
                    @endforeach
                @endif
            @endforeach

            {{-- Next Page Link --}}
            @if ($paginator->hasMorePages())
                <li>
                    <a href="{{ $paginator->nextPageUrl() }}" rel="next" aria-label="@lang('pagination.next')">
                        <i class="material-icons">chevron_right</i>
                    </a>
                </li>
            @else
                <li class="disabled" aria-disabled="true" aria-label="@lang('pagination.next')">
                    <span aria-hidden="true">
                        <i class="material-icons">chevron_right</i>
                    </span>
                </li>
            @endif
        </ul>
    </nav>
@endif








REVISI SUKSES 




@if ($paginator->hasPages())
    <ul class="pagination center">
        {{-- Previous Page Link --}}
        @if ($paginator->onFirstPage())
            <li class="disabled" aria-disabled="true" aria-label="@lang('pagination.previous')">
                <i class="material-icons">chevron_left</i>
            </li>
        @else
            <li>
                <a href="{{ $paginator->previousPageUrl() }}" rel="prev" aria-label="@lang('pagination.previous')">
                    <i class="material-icons">chevron_left</i>
                </a>

            </li>
        @endif

        {{-- Pagination Elements --}}
        @foreach ($elements as $element)
            {{-- "Three Dots" Separator --}}
            @if (is_string($element))
                <li class="disabled" aria-disabled="true">
                    <span>{{ $element }}</span>
                </li>
            @endif

            {{-- Array Of Links --}}
            @if (is_array($element))
                @foreach ($element as $page => $url)
                    @if ($page == $paginator->currentPage())
                        <li class="active" aria-current="page">
                            <a href="#">{{ $page }}</a>
                        </li>
                    @else
                        <li class="waves-effect"><a href="{{ $url }}">{{ $page }}</a></li>
                    @endif
                @endforeach
            @endif
        @endforeach

        {{-- Next Page Link --}}
        @if ($paginator->hasMorePages())
            <li>
                <a href="{{ $paginator->nextPageUrl() }}" rel="next" aria-label="@lang('pagination.next')">
                    <i class="material-icons">chevron_right</i>
                </a>
            </li>
        @else
            <li class="disabled" aria-disabled="true" aria-label="@lang('pagination.next')">
                <span aria-hidden="true">
                    <i class="material-icons">chevron_right</i>
                </span>
            </li>
        @endif
    </ul>
@endif









1.

2.

3.

4.

5.

6.

7.

8.

9.

10.





PERTEMUANE KE 35 

MENYESUAIKAN TAMPILAN REGISTER 



1. TAMPILAN 
FRONTEND DEPAN 



2. FIEL 
navigation.balde.php 



  <li><a href="{{ route('login')}}">LOGIN</a></li>
            <li><a href="{{ route('register')}}">REGISTER</a></li>




3.

4. route 

web.php 

Route::get('/','Frontend\\BookController@index')->name('homegape');



5. edit 
folder auth

folder passwords

file 

register.blade.php

 SEBELUM DI EDIT 




{{--  <div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Register') }}</div>

                <div class="card-body">
                    <form method="POST" action="{{ route('register') }}">
                        @csrf

                        <div class="form-group row">
                            <label for="name" class="col-md-4 col-form-label text-md-right">{{ __('Name') }}</label>

                            <div class="col-md-6">
                                <input id="name" type="text" class="form-control @error('name') is-invalid @enderror" name="name" value="{{ old('name') }}" required autocomplete="name" autofocus>

                                @error('name')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="email" class="col-md-4 col-form-label text-md-right">{{ __('E-Mail Address') }}</label>

                            <div class="col-md-6">
                                <input id="email" type="email" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}" required autocomplete="email">

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="password" class="col-md-4 col-form-label text-md-right">{{ __('Password') }}</label>

                            <div class="col-md-6">
                                <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password" required autocomplete="new-password">

                                @error('password')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="password-confirm" class="col-md-4 col-form-label text-md-right">{{ __('Confirm Password') }}</label>

                            <div class="col-md-6">
                                <input id="password-confirm" type="password" class="form-control" name="password_confirmation" required autocomplete="new-password">
                            </div>
                        </div>

                        <div class="form-group row mb-0">
                            <div class="col-md-6 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    {{ __('Register') }}
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>  --}}





SETELAH DI EDIT 





@extends('frontend.templates.default')

@section('content')
    <div class="container">
        <h2>Register</h2>
        <form action="{{ route('register')}}" class="col s12" method="POST">
            @csrf
            <div class="row">
                <div class="input-field col s12">
                    <i class="material-icons prefix">person</i>
                    <input type="text" class="@error('name') invalid @enderror" name="name"
                    value="{{ old('name')}}">
                    <label for="">Nama : </label>
                    @error('name')
                        <span class="helper-text" data-error="{{ $message }}"></span>
                    @enderror
                </div>

                <div class="input-field col s12">
                    <i class="material-icons prefix">email</i>
                    <input type="email" class="validate @error('email') invalid @enderror" name="email" value="{{ old('email')}}">
                    <label for="">Email : </label>
                    @error('email')
                        <span class="helper-text" data-error="{{ $message }}"></span>
                    @enderror
                </div>

                <div class="input-field col s12">
                    <i class="material-icons prefix">lock</i>
                    <input type="password" class="@error('password') invalid @enderror" name="password" value="">
                    <label for="">Password : </label>
                    @error('password')
                        <span class="helper-text" data-error="{{ $message }}"></span>
                    @enderror
                </div>

                <div class="input-field col s12">
                    <i class="material-icons prefix">lock</i>
                    <input type="password" class="@error('password_confirmation') invalid @enderror" name="password_confirmation" value="">
                    <label for="">Password Confirmation : </label>
                    @error('password_confirmation')
                        <span class="helper-text" data-error="{{ $message }}"></span>
                    @enderror
                </div>

                <div class="input field s12 right">
                    <input type="submit" value="Register" class="vawes-effect waves-light btn red accent-1">
                </div>
            </div>
        </form>
    </div>
@endsection





6.

7. SUKSES 


8.

9.

10.



 PERTEMUAN KE 36 

MENYESUAIKAN TAMPILAN LOGIN




1. Route 

web.php 



2.

3. file 

sebelum file di edit 

login.blade.php 


@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Login') }}</div>

                <div class="card-body">
                    <form method="POST" action="{{ route('login') }}">
                        @csrf

                        <div class="form-group row">
                            <label for="email" class="col-md-4 col-form-label text-md-right">{{ __('E-Mail Address') }}</label>

                            <div class="col-md-6">
                                <input id="email" type="email" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}" required autocomplete="email" autofocus>

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="password" class="col-md-4 col-form-label text-md-right">{{ __('Password') }}</label>

                            <div class="col-md-6">
                                <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password" required autocomplete="current-password">

                                @error('password')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="form-group row">
                            <div class="col-md-6 offset-md-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="remember" id="remember" {{ old('remember') ? 'checked' : '' }}>

                                    <label class="form-check-label" for="remember">
                                        {{ __('Remember Me') }}
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group row mb-0">
                            <div class="col-md-8 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    {{ __('Login') }}
                                </button>

                                @if (Route::has('password.request'))
                                    <a class="btn btn-link" href="{{ route('password.request') }}">
                                        {{ __('Forgot Your Password?') }}
                                    </a>
                                @endif
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection


4.

5.

6. setelah file di edit 


copy dari code register.blade.php 

edit file yang kita butug-hkan saja 


login.blade.php 


@extends('frontend.templates.default')

@section('content')
    <div class="container">
        <h4>LOGIN</h4>
        <form action="{{ route('login')}}" class="col s12" method="POST">
            @csrf
            <div class="row">


                <div class="input-field col s12">
                    <i class="material-icons prefix">email</i>
                    <input type="email" class="validate @error('email') invalid @enderror" name="email" value="{{ old('email')}}">
                    <label for="">Email Address : </label>
                    @error('email')
                        <span class="helper-text" data-error="{{ $message }}"></span>
                    @enderror
                </div>

                <div class="input-field col s12">
                    <i class="material-icons prefix">lock</i>
                    <input type="password" class="@error('password') invalid @enderror" name="password" value="">
                    <label for="">Password : </label>
                    @error('password')
                        <span class="helper-text" data-error="{{ $message }}"></span>
                    @enderror
                </div>


                <div class="input field s12 right">
                    <input type="submit" value="Login" class="vawes-effect waves-light btn red accent-1">
                </div>
            </div>
        </form>
    </div>
@endsection




7.

8. input data login dan verifikasi sukses 



9.

10. SUKSES 









PERTEMUAN KE 37 

MEMBUAT HALMAN DETAIL  BUKU 


1. RUOUTE 

web.php 

Route::get('/book/{book}','Frontend\\BookController@show')->name('book.show');



2. Bookontroller.php


 public function show(Book $book)
    {
        // dd($book); // untuk mengecek data sudah masuk apa belum
        return view('frontend.book.show', [
            'book' => $book,
            ]);

    }


3.

4.

5. show.blade.php 


@extends('frontend.templates.default')

@section('content')
<h2>Detail Buku</h2>
{{--  copy dari index  --}}
<div class="col s12 m12">
    <div class="card horizontal hoverable">
        {{--  <div class="card-image">  --}}
        <img src="{{ $book->getCover() }}">
        {{--  </div>  --}}
        <div class="card-stacked">
        <div class="card-content">
            {{-- <h5>{{ $book->title }}</h5> --}}
            <h4 class="red-text accent-2">{{ $book->title }}</h4>
             {{-- <p>{{ $book->description }}</p> --}}
            <blockquote>
                <p>{{ $book->description }}</p>
            </blockquote>
            <p>
                {{--  {{ $book->author->name}} relasi dari book ke author ..cek model   --}}
                <i class="material-icons">person</i> : {{ $book->author->name}}
            </p>
            <p>
                <i class="material-icons">book</i> : {{ $book->qty }}
            </p>
        </div>
        <div class="card-action">
            <a href="#" class="btn red accent-1 right waves-effect waves-light">PINJAM BUKU</a>
        </div>
        </div>
    </div>
</div>
@endsection




6.

7.

8.

SUKSES 




9.

10.

 


PERTEMUAN KE 38 

MEMBUAT SECTION BUKU LAINNYA DARI PENULIS 



1. 

show.blade.php 


@extends('frontend.templates.default')

@section('content')
<h3>Detail Buku</h3>
{{--  copy dari index  --}}
<div class="col s12 m12">
    <div class="card horizontal hoverable">
        {{--  <div class="card-image">  --}}
        <img src="{{ $book->getCover() }}">
        {{--  </div>  --}}
        <div class="card-stacked">
        <div class="card-content">
            {{-- <h5>{{ $book->title }}</h5> --}}
            <h4 class="red-text accent-2">{{ $book->title }}</h4>
             {{-- <p>{{ $book->description }}</p> --}}
            <blockquote>
                <p>{{ $book->description }}</p>
            </blockquote>
            <p>
                {{--  {{ $book->author->name}} relasi dari book ke author ..cek model   --}}
                <i class="material-icons">person</i> : {{ $book->author->name}}
            </p>
            <p>
                <i class="material-icons">book</i> : {{ $book->qty }}
            </p>
        </div>
        <div class="card-action">
            <a href="#" class="btn red accent-1 right waves-effect waves-light">PINJAM BUKU</a>
        </div>
        </div>
    </div>
</div>

<h4>Buku Lainnya dari penulis {{ $book->author->name }}...</h4>
    <div class="row">
        {{--  {{ dd($book->author->books) }}  --}}
        {{--  @foreach ($book->author->books as $book) looping berelasi buku dan penulis   --}}
        @foreach ($book->author->books->shuffle()->take(4) as $book)
            <div class="col s12 m6">
                <div class="card horizontal hoverable">
                    <div class="card-image">
                    <img src="{{ $book->getCover() }}" height="200px">
                    </div>
                    <div class="card-stacked">
                    <div class="card-content">
                        {{-- <h5>{{ $book->title }}</h5> --}}
                        <h6>
                            <a href="{{ route('book.show', $book) }}">
                                {{ Str::limit($book->title,30) }}
                            </a>
                        </h6>
                        {{-- <p>{{ $book->description }}</p> --}}
                        <p>{{ Str::limit($book->description, 150) }}</p>
                    </div>
                    <div class="card-action">
                        <a href="#" class="btn red accent-1 right waves-effect waves-light">PINJAM BUKU</a>
                    </div>
                    </div>
                </div>
            </div>
        @endforeach
    </div>

@endsection





SUKSES 






2.

3.

4. PERTEMUAN KE 39 

MEMBUAT FUNGSI PINJAM BUKU 



5. Route 

web.php 

// konsep rest meminjam methiod post
Route::post('/book/{book}/borrow','Frontend\\BookController@borrow')->name('book.borrow')->middleware('auth');



6. BookController.php 


  public function borrow(Book $book)
    {
        // dd($book);
        // dd(auth()->id());
         BorrowHistory::create([
            'user_id' => auth()->id(),
            'book_id' => $book->id
         ]);

         return 'Ok';
    }





7.

8. index.blade.php 



@extends('frontend.templates.default')

@section('content')
<h2>Keleksi Buku</h2>
<blockquote>
 <p class="flow-text">Koleksi Buku yang bisa kamu baca & pinjam</p>
</blockquote>
 <div class="row">
    @foreach ($books as $book)
        <div class="col s12 m6">
            <div class="card horizontal hoverable">
                <div class="card-image">
                <img src="{{ $book->getCover() }}" height="200px">
                </div>
                <div class="card-stacked">
                <div class="card-content">
                    {{-- <h5>{{ $book->title }}</h5> --}}
                    <h6>
                        <a href="{{ route('book.show', $book) }}">
                            {{ Str::limit($book->title,30) }}
                        </a>
                    </h6>
                     {{-- <p>{{ $book->description }}</p> --}}
                    <p>{{ Str::limit($book->description, 150) }}</p>
                </div>
                <div class="card-action">
                    {{-- <a href="#" class="btn red accent-1 right waves-effect waves-light">PINJAM BUKU</a> --}}
                <form action="{{ route('book.borrow', $book) }}" method="POST">
                    @csrf
                    <input type="submit" value="Pinjam Buku" class="btn red accent-1 right waves-effect waves-light">
                </form>

                </div>
                </div>
            </div>
        </div>
    @endforeach
 </div>

 {{--  pagimation  --}}
 {{ $books->links('vendor.pagination.materialize') }}

@endsection








9.

10.

 MEMBUAT MODEL 

terminal 

$ php artisan make:model BorrowHistory
Model created successfully.





1.BorrowHistory.php

  // deklarasi tabel
    protected $table = 'borrow_history';

    protected $guarded = [];





2.

3.

4. PERTEMUAN KE 40 
MEMBUAT PINJAM BUKU DENGAN ELOQUENT RELATIONSHIP


5. Model 

membuat relasi 

User.php 
 public function borrow()
    {
        // relasi many to many User ke Book pertem ke 40 
        return $this->belongsToMany(Book::class, 'borrow_history');
    }





6. Book.php 
 // pertem ke 40 relasi many to many  rlasi untuk peminjaman buku
    public function borrowed()
    {
        return $this->belongsToMany(User::class, 'borrow_history');
    }




7. 



8.




9. BookController.php 

public function borrow(Book $book)
    {
        $user = auth()->user(); // mengambil data user yang login, dengan mengambil id

        // menggunakan relasinya
        $user->borrow()->attach($book); // untuk peminjaman buku

        return 'Ok'; // input data peminjaman buku dan lihat di databases borrow_history, data akan terinput 
    }










10.

 CATATAN 

- SATU USER HANYA BOLEH MEMINJAM SATU BUKU,( SATU JUDUL BUKU) 

- DAN PADA QTY JUMLAH AKAN BERKURANG KETIKAN BUKU DI PINJAM OLEH USER  






SUKSES 







PERTEMUAN KE 41 

MENYEMPURNAKAN PROSES PEMINJAMAN BUKU 
 
CATATAN : PROSES 

- SATU USER HANYA BOLEH MEMINJAM SATU JUDUL BUKU 

- DAN SETIAP BUKU YANG DI PINJAM JUMLAH QTY BERKURANG 

 

1.  MEMBUAT FIELDBACK 

toaster

https://materializecss.com/toasts.html



2.

3. buat fiel 
di dalam frontend
ttemplates
partials 

file 
toast.blade.php 

// pertemuan ke 41
<script>
    M.toast({html: 'I am a toast!'})
</script>








4. menggunakan session dengan laravel 



5.

6.BookCOntroller.php 



    public function borrow(Book $book)
    {
        $user = auth()->user(); // mengambil data user yang login, dengan mengambil id

        //SATU USER HANYA BOLEH MEMINJAM SATU BUKU,( SATU JUDUL BUKU)
        if($user->borrow()->where('books.id', $book->id)->count() > 0 ) {
            return redirect()->back()->with('toast','Kamu Sudah meminjam buku dengan judul : ' . $book->title);
        }

        // menggunakan relasinya
        $user->borrow()->attach($book); // untuk peminjaman buku

        // mengurang jumlah QTY apabila buku di pinjam
        $book->decrement('qty');

       //  return redirect()->back(); // input data peminjaman buku dan lihat di databases borrow_history, data akan terinput
        return redirect()->back()->with('toast','Sukses meminjam buku oyeachhh...');
    }




7.

8. membuat QTY apabila user meminjam buku maka QTY akan berkurang di tabel Book 

 // mengurang jumlah QTY apabila buku di pinjam
        $book->decrement('qty');


9.

10.




 CATATAN 

- SATU USER HANYA BOLEH MEMINJAM SATU BUKU,( SATU JUDUL BUKU) 

- DAN PADA QTY JUMLAH AKAN BERKURANG KETIKAN BUKU DI PINJAM OLEH USER  


1.

2.

3.

4.




PERTEMUAN KE 42 
MEMBENAHI NAVIGASI RELASI USER DAN BUKU 





5.  MNENGHILANGKAN BUTTON LOGIN DAN REGISTER DI TAMPILAN FRONTEND, KARNA USER SEBELUMNYA SUDAH LOGIN 



6.

7.navigation.blade.php 

 @guest
            <li><a href="{{ route('login')}}">LOGIN</a></li>
            <li><a href="{{ route('register')}}">REGISTER</a></li>
            {{--  <li><a href="collapsible.html">Javascript</a></li>
            <li><a href="mobile.html">Mobile</a></li>  --}}
        @endguest



8.

9.

10.
    @guest
        <li><a href="{{ route('login')}}">LOGIN</a></li>
        <li><a href="{{ route('register')}}">REGISTER</a></li>
        {{--  <li><a href="collapsible.html">Javascript</a></li>
        <li><a href="mobile.html">Mobile</a></li>  --}}
    @endguest






1.

2. TAMPILKAN MEMNU USER KETIKA SUDAH LOGIN 



3.

4.

5.

6. 
app.blade.php 
 href="{{ route('logout') }}"
          onclick="event.preventDefault();
          document.getElementById('logout-form').submit();">
         {{ __('Logout') }}


DAN 


  {{-- pertemua ke 42 di copy  --}}
                                    <form id="logout-form" action="{{ route('logout') }}" method="POST" style="display: none;">
                                        @csrf
                                    </form>



copy code ini dan tampilkan di 
file navigation.blade.php 


7.

8.

9.

10.

fiel
 
navigation.blade.php 

   <div class="navbar-fixed">
    <nav>
        <div class="nav-wrapper">
        <a href="{{ route('homegape')}}" class="brand-logo">PERPUS</a>
        <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">MENU</i></a>
        <ul class="right hide-on-med-and-down">
            @guest
                <li><a href="{{ route('login')}}">LOGIN</a></li>
                <li><a href="{{ route('register')}}">REGISTER</a></li>
                {{--  <li><a href="collapsible.html">Javascript</a></li>
                <li><a href="mobile.html">Mobile</a></li>  --}}

                {{-- pertemuan ke 42 membelahi navigati relasi user dan buku --}}
                    @else
                        <ul id="dropdown1" class="dropdown-content">
                            <li><a  href="{{ route('logout') }}"
                                    onclick="event.preventDefault();
                                            document.getElementById('logout-form').submit();">Logout
                                </a>
                            </li>
                        </ul>

                {{-- pertemua ke 42 di copy  --}}
                <form id="logout-form" action="{{ route('logout') }}" method="POST" style="display: none;">
                    @csrf
                </form>

                {{--   ketika link ini di klik maka aka mengTRIGER CODE @ELSE --}}
                <li><a href="#" class="dropdown-trigger" data-target="dropdown1">
                    {{ auth()->user()->name }}</a>
                </li>
            @endguest
        </ul>
        </div>
    </nav>
</div>


{{--  tampilan mobile   --}}
<ul class="sidenav" id="mobile-demo">
    @guest
        <li><a href="{{ route('login')}}">LOGIN</a></li>
        <li><a href="{{ route('register')}}">REGISTER</a></li>
        {{--  <li><a href="collapsible.html">Javascript</a></li>
        <li><a href="mobile.html">Mobile</a></li>  --}}
            @else
                <li><a href="{{ route('logout') }}"
                        onclick="event.preventDefault();
                            document.getElementById('logout-form').submit();">Logout
                    </a>
                </li>
    @endguest
</ul>


{{-- pertemua ke 42 di copy  --}}
<form id="logout-form" action="{{ route('logout') }}" method="POST" style="display: none;">
    @csrf
</form>


1.

2.



3. MENAMBAHKAN NILAI CREATED_AT DAN UPDATED_AT DI DALAM DATABASES TABLE BORROW_HISTORY 



4. BUKA MODEL 

User.php 
tambahkan code 
withTimestamps;


5. Model 
 
User.php 

 public function borrow()
    {
        // relasi many to many User ke Book pertem ke 40
        return $this->belongsToMany(Book::class, 'borrow_history')
                    ->withTimestamps();
    }


6. Book.php 


 // pertem ke 40 relasi many to many  rlasi untuk peminjaman buku
    public function borrowed()
    {
        return $this->belongsToMany(User::class, 'borrow_history')
                    ->withTimestamps();
    }

7.

8.

9.

10.




 SUKSES 





1.

2.

3. PERTEMUAN KE 43 

MENAMPILKAN DAFTAR BUKU YANG SUDAH DI PINJAM 



4.

5. Route

web.php 

HomeController 



6.
folder view 

file 
home.blade.php 

tambahkan code 


7.

8.HomeController.php


  public function index()
    {
         // pertemuenak ke 43 memampilkan data
        // auth() artinya user yang sedang login itu siapa
        // user() artinya ambil data user
        // borrow artinya ambil relasinya
        $books = auth()->user()->borrow; // mengambil data buku apa saja yang sudah di pinjam pleh user
        // dd($books);


        return view('home',[
            'books' => $books,
        ]);
    }




9.

10. file 
copy kode ini 
show.blade.php 

<div class="card horizontal hoverable">
        {{--  <div class="card-image">  --}}
        <img src="{{ $book->getCover() }}">
        {{--  </div>  --}}
        <div class="card-stacked">
        <div class="card-content">
            {{-- <h5>{{ $book->title }}</h5> --}}
            <h4 class="red-text accent-2">{{ $book->title }}</h4>
             {{-- <p>{{ $book->description }}</p> --}}
            <blockquote>
                <p>{{ $book->description }}</p>
            </blockquote>
            <p>
                {{--  {{ $book->author->name}} relasi dari book ke author ..cek model   --}}
                <i class="material-icons">person</i> : {{ $book->author->name}}
            </p>
            <p>
                <i class="material-icons">book</i> : {{ $book->qty }}
            </p>
        </div>
        <div class="card-action">
            <a href="#" class="btn red accent-1 right waves-effect waves-light">PINJAM BUKU</a>
        </div>
        </div>
    </div>




1.

2.
 tempelkan di 
fiel 
home.blade.php 


@extends('frontend.templates.default')

@section('content')
<div class="row">
    <h2>BUKU YANG SEDANG DI PINJAM</h2>

    @foreach ($books as $book)
    <div class="col s12 m12">
        <div class="card horizontal hoverable">
            {{--  <div class="card-image">  --}}
            <img src="{{ $book->getCover() }}">
            {{--  </div>  --}}
            <div class="card-stacked">
            <div class="card-content">
                {{-- <h5>{{ $book->title }}</h5> --}}
                <h4 class="red-text accent-2">{{ $book->title }}</h4>
                 {{-- <p>{{ $book->description }}</p> --}}
                <blockquote>
                    <p>{{ $book->description }}</p>
                </blockquote>
                <p>
                    {{--  {{ $book->author->name}} relasi dari book ke author ..cek model   --}}
                    <i class="material-icons">person</i> : {{ $book->author->name}}
                </p>

            </div>

            </div>
        </div>
    </div>
    @endforeach

</div>

@endsection



3.

4.

5.

6.


SUKSES UJI COBA UNTUK PINJAM BUKU DENGAN USER BARU 



7. 


8. menambahkan HOME PADA NAVIGASI 



9.

10.






PERTEMUAN KE 44 

MEMPERBAIKI TOMBOL PINJAM DI HALAMAN DETAIL 




1. show.blade.php 

<form action="{{ route('book.borrow', $book) }}" method="POST">
                    @csrf
                    <input type="submit" value="Pinjam Buku" class="btn red accent-1 right waves-effect waves-light">
                </form>


TAMBHAHKAN CODE DI ATAS UNTUK FORM 




2.

3. 

show.blade.php 


@extends('frontend.templates.default')

@section('content')
<h3>Detail Buku</h3>
{{--  copy dari index  --}}
<div class="col s12 m12">
    <div class="card horizontal hoverable">
        {{--  <div class="card-image">  --}}
        <img src="{{ $book->getCover() }}">
        {{--  </div>  --}}
        <div class="card-stacked">
        <div class="card-content">
            {{-- <h5>{{ $book->title }}</h5> --}}
            <h4 class="red-text accent-2">{{ $book->title }}</h4>
             {{-- <p>{{ $book->description }}</p> --}}
            <blockquote>
                <p>{{ $book->description }}</p>
            </blockquote>
            <p>
                {{--  {{ $book->author->name}} relasi dari book ke author ..cek model   --}}
                <i class="material-icons">person</i> : {{ $book->author->name}}
            </p>
            <p>
                <i class="material-icons">book</i> : {{ $book->qty }}
            </p>
        </div>
        <div class="card-action">
            <form action="{{ route('book.borrow', $book) }}" method="POST">
                @csrf
                <input type="submit" value="Pinjam Buku" class="btn red accent-1 right waves-effect waves-light">
            </form>
        </div>
        </div>
    </div>
</div>

<h4>Buku Lainnya dari penulis {{ $book->author->name }}...</h4>
    <div class="row">
        {{--  {{ dd($book->author->books) }}  --}}
        {{--  @foreach ($book->author->books as $book) looping berelasi buku dan penulis   --}}
        @foreach ($book->author->books->shuffle()->take(4) as $book)
            <div class="col s12 m6">
                <div class="card horizontal hoverable">
                    <div class="card-image">
                    <img src="{{ $book->getCover() }}" height="200px">
                    </div>
                    <div class="card-stacked">
                    <div class="card-content">
                        {{-- <h5>{{ $book->title }}</h5> --}}
                        <h6>
                            <a href="{{ route('book.show', $book) }}">
                                {{ Str::limit($book->title,30) }}
                            </a>
                        </h6>
                        {{-- <p>{{ $book->description }}</p> --}}
                        <p>{{ Str::limit($book->description, 150) }}</p>
                    </div>
                    <div class="card-action">
                        <form action="{{ route('book.borrow', $book) }}" method="POST">
                            @csrf
                            <input type="submit" value="Pinjam Buku" class="btn red accent-1 right waves-effect waves-light">
                        </form>
                    </div>
                    </div>
                </div>
            </div>
        @endforeach
    </div>

@endsection




4.

5.

6.

7.

8.

9.

10.




PERTEMUAN KE 45 



- MERUBAH DI SEMUA HALAMAN YANG KITA MILIKI 


- MEMBUST KOMPONEN CARD BUKU 





1.


file show.blade.php 
    <div class="col s12 m6">
                <div class="card horizontal hoverable">
                    <div class="card-image">
                    <img src="{{ $book->getCover() }}" height="200px">
                    </div>
                    <div class="card-stacked">
                    <div class="card-content">
                        {{-- <h5>{{ $book->title }}</h5> --}}
                        <h6>
                            <a href="{{ route('book.show', $book) }}">
                                {{ Str::limit($book->title,30) }}
                            </a>
                        </h6>
                        {{-- <p>{{ $book->description }}</p> --}}
                        <p>{{ Str::limit($book->description, 150) }}</p>
                    </div>
                    <div class="card-action">
                        <form action="{{ route('book.borrow', $book) }}" method="POST">
                            @csrf
                            <input type="submit" value="Pinjam Buku" class="btn red accent-1 right waves-effect waves-light">
                        </form>
                    </div>
                    </div>
                </div>
            </div>

2.

3.book

file 

index.blade.php 

@extends('frontend.templates.default')

@section('content')
<h2>Keleksi Buku</h2>
<blockquote>
 <p class="flow-text">Koleksi Buku yang bisa kamu baca & pinjam</p>
</blockquote>
 <div class="row">
    @foreach ($books as $book)
        @include('frontend.templates.components.card-book', [  'book' => $book])
    @endforeach
 </div>

 {{--  pagimation  --}}
 {{ $books->links('vendor.pagination.materialize') }}

@endsection



4.

5.

6.

7. 
file
show.blade.php 


@extends('frontend.templates.default')

@section('content')
<h3>Detail Buku</h3>
{{--  copy dari index  --}}
<div class="col s12 m12">
    <div class="card horizontal hoverable">
        {{--  <div class="card-image">  --}}
        <img src="{{ $book->getCover() }}">
        {{--  </div>  --}}
        <div class="card-stacked">
        <div class="card-content">
            {{-- <h5>{{ $book->title }}</h5> --}}
            <h4 class="red-text accent-2">{{ $book->title }}</h4>
             {{-- <p>{{ $book->description }}</p> --}}
            <blockquote>
                <p>{{ $book->description }}</p>
            </blockquote>
            <p>
                {{--  {{ $book->author->name}} relasi dari book ke author ..cek model   --}}
                <i class="material-icons">person</i> : {{ $book->author->name}}
            </p>
            <p>
                <i class="material-icons">book</i> : {{ $book->qty }}
            </p>
        </div>
        <div class="card-action">
            <form action="{{ route('book.borrow', $book) }}" method="POST">
                @csrf
                <input type="submit" value="Pinjam Buku" class="btn red accent-1 right waves-effect waves-light">
            </form>
        </div>
        </div>
    </div>
</div>

<h4>Buku Lainnya dari penulis {{ $book->author->name }}...</h4>
    <div class="row">
        {{--  {{ dd($book->author->books) }}  --}}
        {{--  @foreach ($book->author->books as $book) looping berelasi buku dan penulis   --}}
        @foreach ($book->author->books->shuffle()->take(4) as $book)
            {{-- @component('frontend.templates.components.card-book', ['book' => $book])
            @endcomponent --}}
            @include('frontend.templates.components.card-book', [  'book' => $book])
        @endforeach
    </div>

@endsection





8.

9.

10.






PERTEMUAN KE 46 
ADMIN DAFTAR BUKU YANG DI PINJAM 



1. MEMBUAT MENU DI BERANDA DASHBOARD 
MENU BUKU APA AJA YANG DI PINJAM 



2. Route 
admin.php 

//per 46 route untuk data
Route::get('/borrow/data','DataController@borrows')->name('borrow.data');



// per 46 route untuk tampilannya
Route::get('borrow','BorrowController@index')->name('borrow.index');




3. MEMBUAT RELASI a
many to one 

BorrowHistory.php 

 // pertme 46 relasi Many To one
    // mengambil dat user
    public function user()
    {
        return $this->bolongsTo(User::class);
    }



    public function book()
    {
        return $this->belongsTo(Book::class);
    }


4.

5. DataController.php 

public function borrows()
    {
       $borrows = BorrowHistory::latest();

        return datatables()->of($borrows)
            ->addColumn('user', function (BorrowHistory $model) {
                return $model->user->name; // untuk memanggil relasi dan mengubah tampilan id angga menjadi nama author
            })
            ->addColumn('book_title', function (BorrowHistory $model) {
                return $model->book->title; // untuk memanggil relasi dan mengubah tampilan id angga menjadi nama author
            })
            ->addColumn('action','admin.borrow.action') // mengarah ke action.blade.php
            ->addIndexColumn() // tambah colom
            ->rawColumns(['action']) // di confert menjasdi format html
            ->toJson(); // DESC
    }



6.

7.

8.

9. jalankan terminal 

buat controller
BorrowController.php 

$ php artisan make:controller Admin\\BorrowController
Controller created successfully.


10.file 
BorrowController.php 

 // membuat method
    public function index()
    {
        return view('admin.borrow.index');
    }






1.

2. breadcrumbs.php 

//borrow index
Breadcrumbs::for('admin.borrow.index', function ($trail) {
    $trail->push('Beranda Oyeachh', route('admin.dashboard'));
    $trail->push('Data Buku Yang Di Pinjam Oyeachh...', route('admin.borrow.index'));
});



3.

4. index.blade.php 


@extends('admin.templates.default')
@section('content')
<h1>Penulis</h1>

 {{-- <!-- /.box-header --> --}}
 <div class="box">
        <div class="box-header">
              <h3 class="box-title">DATA PENULIS</h3>
              <a href="{{ route('admin.author.create')}}" class="btn btn-primary">ADD AUTHOR</a>
         </div>
         <div class="box-body">



            <table id="dataTable" class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>NAMA</th>
                            <th>JUDUL BUKU</th>
                            <th>ACTION</th>
                        </tr>
                    </thead>

            </table>
        </div>
</div>
<form action="" method="post" id="deleteForm">
    @csrf
    @method("DELETE")
    <input type="submit" value="Hapus" style="display:none">
</form>

@endsection


@push('styles')
    <link rel="stylesheet" href="{{ asset('assets/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css') }}">
@endpush


@push('scripts')

<script src="{{ asset('assets/bower_components/datatables.net/js/jquery.dataTables.min.js') }}"></script>
<script src="{{ asset('assets/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js') }}"></script>


    <script src="{{ asset('/assets/plugins/bs.notify.min.js')}}"></script>
    @include('admin.templates.partials.alerts')

    <script>
        $(function () {
            $('#dataTable').DataTable({
                processing: true,
                serverSide: true,
                ajax: '{{ route('admin.borrow.data') }}',
                columns: [
                    { data: 'DT_RowIndex', orderable: false, searchable : false},
                    { data: 'user'},
                    { data: 'book_title'},
                    { data: 'action'}
                ]
            });
        });
    </script>
@endpush





5.

6.

7. action.blade.php 



<!-- route di ubah menjadi  -->

<button href="#" class="btn btn-info" id="delete">Pengeembalian Buku</button>
<!-- alert -->






8.

9.

10.



PERTEMUAN KE 47 
FUNGSI PENGEMBALIAN BUKU 


1. CEK DATABASES
TABEL borrow_history 
tambahkan return dan admin_id untuk konformasi pengembalian buku 



2. 
$ php artisan make:migration add_returned_at_and_receiver_user_id_on_borrow_history_table --table=borrow_history
Created Migration: 2020_04_14_152429_add_returned_at_and_receiver_user_id_on_borr
ow_history_table


3.

4. databases migration nama table.php

  public function up()
    {
        Schema::table('borrow_history', function (Blueprint $table) {
            // method untuk buku itu di kembalikan kapan waktunya
            $table->dateTime('returned_at')->nullable()->default(null)->after('book_id');
            $table->bigInteger('admin_id')->nullable()->default(null)->after('returned_at');
        });
    }





   public function down()
    {
        Schema::table('borrow_history', function (Blueprint $table) {
            //pertemuan ke 47 method untuk pengembalikan buku
            $table->dropColumn('returned_at');
            $table->dropColumn('admin_id');
        });
    }

5.


setup ke Model BorrowHistory.php

- membuat relasi ke admin

// pertemuanke 47
public function admin()
{
    return $this->belongsTo(User::class, 'id','admin_id');
}





6.

7. membuat function di BorrowCOntroller.php

membuat method
 

   public function returnBook(Request $request, BorrowHistory $borrowHistory)
    {
        $borrowHistory->update([
            'returned_at' => Carbon::now(), // untuk =pengembalikan buku
            'admin_id' => auth()->id(), // untuk user id yang sdang login
        ]);

        return redirect()->back()->withSuccess('Buku Di Kembalikan');
    }

8.




masuk ke ROuting Admin 

//47
Route::put('borrow/{borrowHistory}/return','BorrowController@returnBook')
->name('borrow.return');


9.



10. action.blade.php 

{{--  route di ubah menjadi    --}}
<button href="{{ route('admin.borrow.return', $model) }}" class="btn btn-info" id="return">Pengembalian Buku</button>
<!-- alert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>

<!-- alert -->

{{--  triger switch alert   --}}
<script>
    // membuat request ajax menggunakan element
    $('button#return').on('click', function(e){ // error
        e.preventDefault(); // belum jalan
        // membuat variavel
        var href = $(this).attr('href');

            // alert
            Swal.fire({
                    title:'Apakah kamu yakin datanya sudah benar ??',
                    text: 'Pastikan bahwa data Buku yang dikembalikan sama !!!',
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Ya, Benar data sudah di Cek!'
                    }).then((result) => {
                        if (result.value) {
                        // membuat tombol trigger untuk tombol form
                        document.getElementById('returnForm').action = href;
                        document.getElementById('returnForm').submit();

                            Swal.fire(
                                'Dikembalikan!', // kalo sukses
                                'Buku sudah di Kembalikan...Oyeachh.',
                                'success'
                            )
                        }
                })
    })
</script>





PERTEMUAN KE 48 
MENAMPILKAN HANYA BUKU YANG SEDANG DI PINJAM 

1.

2.model 
BorrowHistory.php 


// 48 , method untuk menampilkan buku yang di pinjam saja
    public function scopeIsBorrowed($query) // variabel scope
    {
        return $query->where('returned_at', null);

    }

3.

4.

5.

6. DataController.php 


 // 48 mengubah code dan di tambahkan isBorrowed, untuk menampilkan buku yang di pinjam saja
       $borrows = BorrowHistory::isBorrowed()->latest();



7.BorrowController.php 


 // membuat method
    public function index()
    {
        return view('admin.borrow.index',[
            'title' => 'Daftar Buku yang Di Pinjam',
        ]);
    }

// tambahkan title untuk nama halaman 

8.

9.

10.




1.

2.

3.

4.

5.

6.

7.

8.

9.

10.

 PER 50 

MENANGANI MASALAH N + 1,
MENGATASI MASALAH QUERY SETELAH DI LOOPING DENGAN RELASI BANYAK QUERY  


1. MENGGUNAKAN IGERLOPUD PADA ELOQUEND 



2. DataController.php 
 cara ke 1 
  // per50 -> MENGATASI MASALAH QUERY SETELAH DI LOOPING DENGAN RELASI BANYAK QUERY
        $books = Book::with('author')->orderBy('title', 'ASC');





cara ke 2 

      // per50 -> MENGATASI MASALAH QUERY SETELAH DI LOOPING DENGAN RELASI BANYAK QUERY
          $books = Book::with('author')->orderBy('title', 'ASC')->get();

          $books->load('author');



3.
$borrows = BorrowHistory::isBorrowed()->latest()->get();

       $borrows->load('user','book');



4.

5.

6.




PER 51 
menambahkan kuantitas atau QTY untuk data buku yang dikembalikan

7. book 
index.blade.php

<th>JUMLAH BUKU</th>

  { data: 'qty'},
8.

9.

10.BorrowController.php 

 // per 51 , mengambil data buku kkemudian ke relasi buku dan menambahakn method increment artinya tambah
        $borrowHistory->book()->increment('qty');




1.

2.

3.

4.


//PER 52 
FIX BUG PADA PENGECEKAN BUKU DI PINJAM 

 
5.frontend 
BookController.php
public function borrow
 //SATU USER HANYA BOLEH MEMINJAM SATU BUKU,( SATU JUDUL BUKU)

// untuk validasi fix bag peminjaman dan pengembalian buku

    if($user->borrow()->isStillBorrow($book->id)) {


6.

7. model 
Book.php 

  //per 52 fix bug pada pengecekan buku
    public function scopeIsStillBorrow($query, $bookId)
    {
        return $query->where('books.id', $bookId)
                    ->where('returned_at', null)
                    ->count() > 0;
    }

8.

9.

10.





PER 53 

MEMBUAT HALAMAN LAPORAN BUKU PALING BANYAK DI PINJAM 




1. Terminal '

AMIR SY@DESKTOP-GVPFF0H MINGW64 /c/xampp/htdocs/perpus_7
$ php artisan make:controller Admin\\ReportController
Controller created successfully.


2. membuat laporan data buku 

tidak menggunakan datatable 


3. ReportController.php
membuat function   

  //
    public function topBook()
    {
        //$books = Book::paginate(10);
        $books = Book::withCount('borrowed')
                      ->orderBy('borrowed_count','desc')
                      ->paginate(10);

        return view('admin.report.top-book',[
            'books' => $books,
        ]);
    }



4. Route 
admin 

Route::get('report/top-book','ReportController@topbook')->name('report.top-book');



5. view 
report 
top-book.php 

@extends('admin.templates.default')
@section('content')
 <!-- /.box-header -->
 <div class="box">
        <div class="box-header">
              <h3 class="box-title">LAPORAN DATA BUKU</h3><br><br>
         </div>
         <div class="box-body">

            <table id="dataTable" class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>NO</th>
                            <th>JUDUL</th>
                            <th>DESKRIPSI</th>
                            <th>JUMLAH BUKU</th>
                            <th>TOTAL DIPINJAM</th>
                            <th>PENULIS</th>
                            <th>SAMPUL</th>
                        </tr>
                    </thead>

                     <tbody>
                        @foreach ($books as $book)
                            <tr>
                                <td> </td>
                                <td>{{$book->title}}</td>
                                <td>{{$book->description}}</td>
                                <td>{{$book->qty}}</td>
                                <td>{{ $book->borrowed_count }}</td>
                                <td>{{$book->author->name}}</td>
                                <td>
                                    <img src="{{ $book->getCover() }}" height="150px" alt="{{ $book->title}}">
                                </td>
                            </tr>
                        @endforeach
                    </tbody>
            </table>
            {{ $books->links() }}
        </div>
</div>

@endsection


6.

7.

8.

9.

10.


PERTEMUAN KE 54 

MEMBUAT HALAMAN LAPORAN USER TERAKHIR 




1. ReportController.php 

  public function topUser()
    {
        // memanggil relasi di model User.php
        $users = User::withcount('borrow')
                      ->orderBy('borrow_count', 'desc')
                      ->paginate(10);

        return view('admin.report.top-user',[
            'users' => $users,
        ]);
    }



2.

3. Route 
admin 


Route::get('report/top-user','ReportController@topuser')->name('report.top-user');




4. view 
report 
top-user.php 


@extends('admin.templates.default')
@section('content')
 <!-- /.box-header -->
 <div class="box">
        <div class="box-header">
              <h3 class="box-title">LAPORAN DATA USER</h3><br><br>
         </div>
         <div class="box-body">

            <table id="dataTable" class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>NO</th>
                            <th>NAMA</th>
                            <th>EMAIL</th>
                            <th>JUMLAH PEMINJAM</th>
                            <th>BERGABUNG</th>
                        </tr>
                    </thead>

                     <tbody>
                        @foreach ($users as $user)
                            <tr>
                                <td> </td>
                                <td>{{$user->name}}</td>
                                <td>{{$user->email}}</td>
                                <td>{{$user->borrow_count }}</td>
                                <td>{{$user->created_at->diffForHumans() }}</td>
                            </tr>
                        @endforeach
                    </tbody>
            </table>
            {{ $users->links() }}
        </div>
</div>

@endsection






5. breamgram.php 

//report
//BUser index
Breadcrumbs::for('admin.report.top-user', function ($trail) {
    $trail->push('Beranda Oyeachh', route('admin.dashboard'));
    $trail->push('Laporan Data User', route('admin.report.top-user'));
});




6.

7.

8.

9.

10.


 PERTEMUAN KE 55 CUSTOM PAGINATION 

CARA PERTAMA 


1. report 
top-book.blade.php 

  @php
                            $page = 1;
                            if (request()->has('page')) {
                                $page = request('page');
                            }
                            $no = (15 * $page) - (15 -1);
                         @endphp

2.

3. ReportController.php 

 ->paginate(15);


4.

5.

6.
 CUSTOM PAGINATION 


7. .env 
# // perteke 55 custom paginate admin
PAGINATION_ADMIN=15





8. ReportController.php 
  ->paginate(env('PAGINATION_ADMIN'));


9.

10. top-book.blade.php 

 @php
                            $page = 1;
                            if (request()->has('page')) {
                                $page = request('page');
                            }
                            $no = (env('PAGINATION_ADMIN') * $page) - (env('PAGINATION_ADMIN') -1);
                         @endphp




1. top-user.blade.php 

 @php
                            $page = 1;
                            if (request()->has('page')) {
                                $page = request('page');
                            }
                            $no = (env('PAGINATION_ADMIN') * $page) - (env('PAGINATION_ADMIN') -1);
                         @endphp

2.

3.

4.

5.

6.

7.

8.

9.

10.




1.

2.

3.

4.

5.

6.

7.

8.

9.

10.




1.

2.

3.

4.

5.

6.

7.

8.

9.

10.




1.

2.

3.

4.

5.

6.

7.

8.

9.

10.




1.

2.

3.

4.

5.

6.

7.

8.

9.

10.




1.

2.

3.

4.

5.

6.

7.

8.

9.

10.




1.

2.

3.

4.

5.

6.

7.

8.

9.

10.




1.

2.

3.

4.

5.

6.

7.

8.

9.

10.